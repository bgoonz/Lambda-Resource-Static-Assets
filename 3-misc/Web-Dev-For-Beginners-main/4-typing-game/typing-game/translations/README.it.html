<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README.it</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="creare-un-gioco-utilizzando-gli-eventi">Creare un gioco utilizzando gli eventi</h1>
<h2 id="quiz-pre-lezione">Quiz Pre-Lezione</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/21?loc=it">Quiz Pre-Lezione</a></p>
<h2 id="programmazione-guidata-dagli-eventi">Programmazione guidata dagli eventi</h2>
<p>Quando si crea un‚Äôapplicazione basata su browser, si fornisce un‚Äôinterfaccia utente grafica (GUI) che l‚Äôutente pu√≤ utilizzare quando interagisce con ci√≤ che si √® creato. Il modo pi√π comune per interagire con il browser √® facendo clic e digitando su vari elementi. La sfida che si deve affrontare come sviluppatore √® che non si conosce quando gli utenti eseguiranno queste operazioni!</p>
<p><a href="https://it.wikipedia.org/wiki/Programmazione_a_eventi">Programmazione guidata dagli eventi</a> √® il nome del tipo di programmazione che serve per creare l‚Äôinterfaccia grafica (GUI). Se si suddividie un po‚Äô questa frase, si nota che la parola chiave qui √® <strong>evento</strong>. <a href="https://www.grandidizionari.it/Dizionario_Italiano/parola/E/evento.aspx?query=evento">L‚Äôevento</a>, secondo il dizionario, √® definito come ‚Äúfatto avvenuto o che pu√≤ avvenire‚Äù. Questo descrive perfettamente la situazione da affrontare. Si sa che succeder√† qualcosa per cui si vuole eseguire del codice in risposta, ma non si sa quando avverr√†.</p>
<p>Il modo in cui si contrassegna una sezione di codice che si vuole eseguire √® creando una funzione. Quando si pensa alla <a href="https://it.wikipedia.org/wiki/Programmazione_procedurale">programmazione procedurale</a>, le funzioni vengono chiamate in un ordine specifico. La stessa cosa sar√† vera con la programmazione guidata dagli eventi. La differenza √® <strong>come</strong> verranno chiamate le funzioni.</p>
<p>Per gestire gli eventi (clic sul pulsante, digitazione, ecc.), si registrano gli ascoltatori di eventi (<strong>event listener</strong>). Un event listener √® una funzione che ascolta il verificarsi di un evento e viene eseguita in risposta. Gli event listener possono aggiornare l‚Äôinterfaccia utente, effettuare chiamate al server o qualsiasi altra cosa debba essere eseguita in risposta all‚Äôazione dell‚Äôutente. Un event listener si aggiunge usando <a href="https://developer.mozilla.org/docs/Web/API/EventTarget/addEventListener">addEventListener</a>, e fornendo una funzione da eseguire.</p>
<blockquote>
<p><strong>NOTA:</strong> vale la pena sottolineare che esistono numerosi modi per creare event listener. √à possibile utilizzare funzioni anonime o creare funzioni con nome. Si possono utilizzare varie scorciatoie, come impostare la propriet√† <code>click</code> o utilizzare <code>addEventListener</code>. In questo esercizio si ci concentrer√† su <code>addEventLister</code> e sulle funzioni anonime, poich√© √® probabilmente la tecnica pi√π comune utilizzata dagli sviluppatori web. √à anche la pi√π flessibile, visto che <code>addEventListener</code> funziona per tutti gli eventi e il nome dell‚Äôevento pu√≤ essere fornito come parametro.</p>
</blockquote>
<h3 id="eventi-comuni">Eventi comuni</h3>
<p>Ci sono <a href="https://developer.mozilla.org/docs/Web/Events">dozzine di eventi</a> disponibili da ascoltare quando si crea un‚Äôapplicazione. Fondamentalmente qualsiasi cosa un utente fa su una pagina genera un evento, il che d√† molto potere allo sviluppatore per assicurarsi che egli ottenga l‚Äôesperienza che desidera. Fortunatamente, in genere si avr√† solo bisogno di una piccola manciata di eventi. Eccone alcuni comuni (inclusi i due che verranno usati durante la creazione del gioco):</p>
<ul>
<li><a href="https://developer.mozilla.org/docs/Web/API/Element/click_event">clic</a>: l‚Äôutente ha fatto clic su qualcosa, in genere un pulsante o un collegamento ipertestuale</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/Element/contextmenu_event">contextmenu</a>: l‚Äôutente ha fatto clic con il pulsante destro del mouse</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/Element/select_event">select</a>: l‚Äôutente ha evidenziato del testo</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/Element/input_event">input</a>: l‚Äôutente ha inserito del testo</li>
</ul>
<h2 id="creare-il-gioco">Creare il gioco</h2>
<p>Verr√† creato un gioco per esplorare come funzionano gli eventi in JavaScript. Il gioco metter√† alla prova l‚Äôabilit√† di battitura di un giocatore, che √® una delle abilit√† pi√π sottovalutate che tutti gli sviluppatori dovrebbero avere. Tutti dovrebbero esercitarsi a digitare! Il flusso generale del gioco sar√† simile a questo:</p>
<ul>
<li>Il giocatore fa clic sul pulsante di avvio e gli viene visualizzata una citazione da digitare</li>
<li>Il giocatore digita la citazione il pi√π velocemente possibile in una casella di testo
<ul>
<li>Quando ogni parola √® completata, viene evidenziata quella successiva</li>
<li>Se il giocatore ha un errore di battitura, la casella di testo viene aggiornata in rosso</li>
<li>Quando il giocatore completa la citazione, viene visualizzato un messaggio di successo con il tempo trascorso</li>
</ul></li>
</ul>
<p>Ora si costruir√† il gioco e si imparier√† a conoscere gli eventi!</p>
<h3 id="struttura-dei-file">Struttura dei file</h3>
<p>Saranno necessari tre file in totale: <strong>index.html</strong>, <strong>script.js</strong> e <strong>style.css</strong>. Si inizia impostando quelli per rendere la vita un po‚Äô pi√π facile allo sviluppatore.</p>
<ul>
<li>Creare una nuova cartella per il proprio lavoro aprendo una console o una finestra di terminale ed eseguendo il seguente comando:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># Linux o macOS</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="fu">mkdir</span> typing-game <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> typing-game</a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co"># Windows</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="ex">md</span> typing-game <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> typing-game</a></code></pre></div>
<ul>
<li>Aprire Visual Studio Code</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="ex">code</span> .</a></code></pre></div>
<ul>
<li>Aggiungere tre file alla cartella in Visual Studio Code con i seguenti nomi:
<ul>
<li>index.html</li>
<li>script.js</li>
<li>Style.css</li>
</ul></li>
</ul>
<h2 id="creare-linterfaccia-utente">Creare l‚Äôinterfaccia utente</h2>
<p>Se si esaminano i requisiti, si sapr√† che servir√† una manciata di elementi sulla pagina HTML. Questa √® una specie di ricetta, per la quale servono alcuni ingredienti:</p>
<ul>
<li>Un punto nel quale visualizzare la citazione che l‚Äôutente deve digitare</li>
<li>Un punto nel quale visualizzare qualsiasi messaggio, come un messaggio di successo</li>
<li>Una casella di testo per la digitazione</li>
<li>Un pulsante di avvio</li>
</ul>
<p>Ognuno di questi avr√† bisogno di ID in modo da poterli referenziare nel codice JavaScript. Verranno aggiunti anche riferimenti ai file CSS e JavaScript che saranno creati.</p>
<p>Creare un nuovo file denominato <strong>index.html</strong>. Inserire il segunte testo HTML:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb3-1" title="1"><span class="co">&lt;!-- inside index.html --&gt;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">&lt;html&gt;</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="kw">&lt;title&gt;</span>Gioco di Digitazione<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="kw">&lt;link</span><span class="ot"> rel=</span><span class="st">&quot;stylesheet&quot;</span><span class="ot"> href=</span><span class="st">&quot;style.css&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb3-8" title="8">  <span class="kw">&lt;h1&gt;</span>Gioco di Digitazione<span class="kw">&lt;/h1&gt;</span></a>
<a class="sourceLine" id="cb3-9" title="9">  <span class="kw">&lt;p&gt;</span>Esercita la tua abilit√† nella digitazione con una citazione da Sherlock Holmes. Fai click su <span class="kw">&lt;strong&gt;</span>start<span class="kw">&lt;/strong&gt;</span> per iniziare!<span class="kw">&lt;/p&gt;</span></a>
<a class="sourceLine" id="cb3-10" title="10">  <span class="kw">&lt;p</span><span class="ot"> id=</span><span class="st">&quot;quote&quot;</span><span class="kw">&gt;&lt;/p&gt;</span> <span class="co">&lt;!-- Qui si visualizza la citazione --&gt;</span></a>
<a class="sourceLine" id="cb3-11" title="11">  <span class="kw">&lt;p</span><span class="ot"> id=</span><span class="st">&quot;message&quot;</span><span class="kw">&gt;&lt;/p&gt;</span> <span class="co">&lt;!-- Qui si visualizza un qualsiasi messaggio di stato --&gt;</span></a>
<a class="sourceLine" id="cb3-12" title="12">  <span class="kw">&lt;div&gt;</span></a>
<a class="sourceLine" id="cb3-13" title="13">    <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> aria-label=</span><span class="st">&quot;current word&quot;</span><span class="ot"> id=</span><span class="st">&quot;typed-value&quot;</span> <span class="kw">/&gt;</span> <span class="co">&lt;!-- La casella di testo per digitare --&gt;</span></a>
<a class="sourceLine" id="cb3-14" title="14">    <span class="kw">&lt;button</span><span class="ot"> type=</span><span class="st">&quot;button&quot;</span><span class="ot"> id=</span><span class="st">&quot;start&quot;</span><span class="kw">&gt;</span>Start<span class="kw">&lt;/button&gt;</span> <span class="co">&lt;!-- Per far partire il gioco --&gt;</span></a>
<a class="sourceLine" id="cb3-15" title="15">  <span class="kw">&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb3-16" title="16">  <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;script.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></a>
<a class="sourceLine" id="cb3-17" title="17"><span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb3-18" title="18"><span class="kw">&lt;/html&gt;</span></a></code></pre></div>
<h3 id="avviare-lapplicazione">Avviare l‚Äôapplicazione</h3>
<p>√à sempre meglio sviluppare in modo iterativo per vedere come appaiono le cose. Lanciare l‚Äôapplicazione. Una meravigliosa estensione per Visual Studio Code chiamata <a href="https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer">Live Server</a> ospiter√† la propria applicazione localmente e aggiorner√† il browser ogni volta che viene effettuata una operazione di salvataggio nel codice.</p>
<ul>
<li>Installare <a href="https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer">Live Server</a> seguendo il collegamento e facendo clic su <strong>Install</strong>
<ul>
<li>Verr√† richiesto dal browser di aprire Visual Studio Code e quindi da Visual Studio Code di eseguire l‚Äôinstallazione</li>
<li>Riavviare Visual Studio Code se richiesto</li>
</ul></li>
<li>Una volta installato, in Visual Studio Code, fare clic su Ctrl-Shift-P (o Cmd-Shift-P se su MAC) per aprire il riquadro dei comandi</li>
<li>Digitare <strong>Live Server: Open with Live Server</strong>
<ul>
<li>Live Server inizier√† a servire la propria applicazione</li>
</ul></li>
<li>Aprire un browser e andare a <strong>https://localhost:5500</strong></li>
<li>Ora si dovrebbe vedere la pagina che si √® creato!</li>
</ul>
<p>Ora si aggiungeranno alcune funzionalit√†.</p>
<h2 id="aggiungere-css">Aggiungere CSS</h2>
<p>Con l‚ÄôHTML creato, ora si aggiunge CSS per lo stile di base. Occorre evidenziare la parola che il giocatore dovrebbe digitare e colorare la casella di testo se ci√≤ che ha digitato non √® corretto. Verr√† fatto con due classi.</p>
<p>Aprire il file denominato <strong>style.css</strong> e aggiungere quanto segue.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb4-1" title="1"><span class="co">/* all&#39;interno di style.css */</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="fu">.highlight</span> {</a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="kw">background-color</span>: <span class="cn">yellow</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4">}</a>
<a class="sourceLine" id="cb4-5" title="5"></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="fu">.error</span> {</a>
<a class="sourceLine" id="cb4-7" title="7">  <span class="kw">background-color</span>: <span class="cn">lightcoral</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-8" title="8">  <span class="kw">border</span>: <span class="cn">red</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-9" title="9">}</a></code></pre></div>
<p>‚úÖ Quando si tratta di CSS, si pu√≤ impaginare la propria pagina come si preferisce. Ci si prenda un po‚Äô di tempo per rendere la pagina pi√π accattivante:</p>
<ul>
<li>Scegliere un carattere diverso</li>
<li>Colorare le intestazioni</li>
<li>Ridimensionare gli elementi</li>
</ul>
<h2 id="javascript">JavaScript</h2>
<p>Con l‚Äôinterfaccia utente creata, √® il momento di concentrare l‚Äôattenzione sul codice JavaScript che fornir√† la logica. Verr√† suddiviso in una manciata di passaggi:</p>
<ul>
<li><a href="#aggiungere-le-costanti">Creare le costanti</a></li>
<li><a href="#aggiungere-la-logica-di-avvio">Event listener per avviare il gioco</a></li>
<li><a href="#aggiungere-la-logica-di-digitazione">Event listener per la digitazione</a></li>
</ul>
<p>Se non gi√† fatto, creare un nuovo file chiamato <strong>script.js</strong>.</p>
<h3 id="aggiungere-le-costanti">Aggiungere le costanti</h3>
<p>Serviranno alcuni elementi per facilitarsi la vita per la programmazione. Ancora una volta, simile a una ricetta, ecco di cosa si avr√† bisogno:</p>
<ul>
<li>Matrice con l‚Äôelenco di tutte le citazioni</li>
<li>Matrice vuota per memorizzare tutte le parole per la citazione corrente</li>
<li>Spazio per memorizzare l‚Äôindice della parola che il giocatore sta al momento digitando</li>
<li>L‚Äôorario nel quale il giocatore ha fatto clic su Start</li>
</ul>
<p>Verranno anche referenziati gli elementi dell‚Äôinterfaccia utente:</p>
<ul>
<li>La casella di testo (<strong>typed-value</strong>)</li>
<li>La visualizzazione della citazione (<strong>quote</strong>)</li>
<li>Il messaggio (<strong>message</strong>)</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="co">// all&#39;interno di script.js</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co">// tutte le citazioni</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="kw">const</span> quotes <span class="op">=</span> [</a>
<a class="sourceLine" id="cb5-4" title="4">    <span class="st">&#39;Eliminato l‚Äôimpossibile, ci√≤ che resta, per improbabile che sia, deve essere la verit√†.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-5" title="5">    <span class="st">&#39;Non vi √® nulla di cos√¨ ingannevole come un fatto ovvio.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-6" title="6">    <span class="st">&#39;Spesso, il delitto pi√π banale √® il pi√π incomprensibile proprio perch√© non presenta aspetti insoliti o particolari, da cui si possano trarre delle deduzioni.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-7" title="7">    <span class="st">&#39;Non faccio mai eccezioni. Un‚Äôeccezione contraddice la regola.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-8" title="8">    <span class="st">&#39;Ci√≤ che un uomo pu√≤ inventare, un altro pu√≤ scoprire.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-9" title="9">    <span class="st">&#39;Il miglior modo per chiarire le idee √® quello di spiegarle ad un‚Äôaltra persona.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-10" title="10">    <span class="st">&quot;L&#39;istruzione non finisce mai, Watson. Si tratta di una serie di lezioni, con la pi√π grande per l&#39;ultima.&quot;</span></a>
<a class="sourceLine" id="cb5-11" title="11">]<span class="op">;</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">// memorizza l&#39;elenco di parole e l&#39;indice della parola che il giocatore sta attualmente digitando</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="kw">let</span> words <span class="op">=</span> []<span class="op">;</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="kw">let</span> wordIndex <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="co">// l&#39;orario di partenza</span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="kw">let</span> startTime <span class="op">=</span> <span class="va">Date</span>.<span class="at">now</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="co">// elementi nella pagina</span></a>
<a class="sourceLine" id="cb5-18" title="18"><span class="kw">const</span> quoteElement <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;quote&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-19" title="19"><span class="kw">const</span> messageElement <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;message&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-20" title="20"><span class="kw">const</span> typedValueElement <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;typed-value&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p>‚úÖ Proseguire aggiungendo altre citazioni al proprio gioco</p>
<blockquote>
<p><strong>NOTA:</strong> si possono recuperare gli elementi ogni volta che serve nel codice utilizzando <code>document.getElementById</code>. A causa del fatto che questi elementi verrranno referenziati su base regolare, si eviteranno errori di battitura con stringhe letterali utilizzando costanti. Infrastrutture come <a href="https://vuejs.org/">Vue.js</a> o <a href="https://reactjs.org/">React</a> possono aiutare a gestire meglio la centralizzazione del codice.</p>
</blockquote>
<p>Si prenda un minuto per guardare un video sull‚Äôuso di <code>const</code>, <code>let</code> e <code>var</code></p>
<p>[<img src="https://img.youtube.com/vi/JNIXfGiDWM8/0.jpg" alt="Tipi delle variabili" />](https://youtube.com/watch?v=JNIXfGiDWM8 " Tipi delle variabili")</p>
<blockquote>
<p>Fare clic sull‚Äôimmagine sopra per un video sulle variabili (in inglese).</p>
</blockquote>
<h3 id="aggiungere-la-logica-di-avvio">Aggiungere la logica di avvio</h3>
<p>Per iniziare il gioco, il giocatore far√† clic su Start. Ovviamente non si sa quando verr√† fatto clic su Start. √à qui che entra in gioco un <a href="https://developer.mozilla.org/docs/Web/API/EventTarget/addEventListener">event listener</a> Un event listener consentir√† di ascoltare il verificarsi di qualcosa (un evento) ed eseguire del codice in risposta. Nel nostro caso, si vuole eseguire il codice quando l‚Äôutente fa clic su Start.</p>
<p>Quando l‚Äôutente fa clic su <strong>Start</strong>, occorre selezionare una citazione , configurare l‚Äôinterfaccia utente e impostare il monitoraggio per la parola e il conteggio del tempo. Di seguito √® riportato il codice JavaScript che si dovr√† aggiungere; verr√† discusso subito dopo questo blocco.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="co">// alla fine in script.js</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;start&#39;</span>).<span class="at">addEventListener</span>(<span class="st">&#39;click&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="co">// si ottiene una citazione</span></a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="kw">const</span> quoteIndex <span class="op">=</span> <span class="va">Math</span>.<span class="at">floor</span>(<span class="va">Math</span>.<span class="at">random</span>() <span class="op">*</span> <span class="va">quotes</span>.<span class="at">length</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-5" title="5">  <span class="kw">const</span> quote <span class="op">=</span> quotes[quoteIndex]<span class="op">;</span></a>
<a class="sourceLine" id="cb6-6" title="6">  <span class="co">// Si inserisce la citazione in un array di parole</span></a>
<a class="sourceLine" id="cb6-7" title="7">  words <span class="op">=</span> <span class="va">quote</span>.<span class="at">split</span>(<span class="st">&#39; &#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-8" title="8">  <span class="co">// si reimposta l&#39;indice della parola da monitorare</span></a>
<a class="sourceLine" id="cb6-9" title="9">  wordIndex <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-10" title="10"></a>
<a class="sourceLine" id="cb6-11" title="11">  <span class="co">// Aggiornamenti interfaccia utente </span></a>
<a class="sourceLine" id="cb6-12" title="12">  <span class="co">// Si crea un array di elementi span in modo da impostare una classe</span></a>
<a class="sourceLine" id="cb6-13" title="13">  <span class="kw">const</span> spanWords <span class="op">=</span> <span class="va">words</span>.<span class="at">map</span>(<span class="kw">function</span>(word) <span class="op">{</span> <span class="cf">return</span> <span class="vs">`&lt;span&gt;</span><span class="sc">${</span>word<span class="sc">}</span><span class="vs"> &lt;/span&gt;`</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-14" title="14">  <span class="co">// Converzione in stringa e impostazione come innerHTML alla visualizzazione della citazione</span></a>
<a class="sourceLine" id="cb6-15" title="15">  <span class="va">quoteElement</span>.<span class="at">innerHTML</span> <span class="op">=</span> <span class="va">spanWords</span>.<span class="at">join</span>(<span class="st">&#39;&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-16" title="16">  <span class="co">// Evidenzia la prima parola</span></a>
<a class="sourceLine" id="cb6-17" title="17">  <span class="va">quoteElement</span>.<span class="at">childNodes</span>[<span class="dv">0</span>].<span class="at">className</span> <span class="op">=</span> <span class="st">&#39;highlight&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-18" title="18">  <span class="co">// Pulisce qualsiasi precedente messaggio</span></a>
<a class="sourceLine" id="cb6-19" title="19">  <span class="va">messageElement</span>.<span class="at">innerText</span> <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-20" title="20"></a>
<a class="sourceLine" id="cb6-21" title="21">  <span class="co">// Impostazione della casella di testo</span></a>
<a class="sourceLine" id="cb6-22" title="22">  <span class="co">// Pulisce la casella di testo</span></a>
<a class="sourceLine" id="cb6-23" title="23">  <span class="va">typedValueElement</span>.<span class="at">value</span> <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-24" title="24">  <span class="co">// imposta il focus</span></a>
<a class="sourceLine" id="cb6-25" title="25">  <span class="va">typedValueElement</span>.<span class="at">focus</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-26" title="26">  <span class="co">// imposta il gestore di evento</span></a>
<a class="sourceLine" id="cb6-27" title="27"></a>
<a class="sourceLine" id="cb6-28" title="28">  <span class="co">// Fa partire il timer</span></a>
<a class="sourceLine" id="cb6-29" title="29">  startTime <span class="op">=</span> <span class="kw">new</span> <span class="at">Date</span>().<span class="at">getTime</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-30" title="30"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Verr√† analizzato il codice!</p>
<ul>
<li>Impostazione del monitoraggio delle parole
<ul>
<li>L‚Äôutilizzo di <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Math/floor">Math.floor</a> e <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Math/random">Math.random</a> consente di selezionare in modo casuale una citazione dall‚Äôarray <code>quotes</code></li>
<li>Si converte la citazione (<code>quote</code>) in un array di parole (<code>words</code>) in modo da poter tracciare la parola che il giocatore sta attualmente digitando</li>
<li>Si imposta <code>wordIndex</code> a 0, poich√© il giocatore inizier√† dalla prima parola</li>
</ul></li>
<li>Impostazione dell‚Äôinterfaccia utente
<ul>
<li>Si crea un array <code>spanWords</code>, che contiene ogni parola all‚Äôinterno di un elemento <code>span</code>
<ul>
<li>Questo permetter√† di evidenziare la parola sul display</li>
</ul></li>
<li>Si unisce (<code>join</code>) l‚Äôarray per creare una stringa che si pu√≤ usare per aggiornare <code>innerHTML</code> su <code>quoteElement</code>
<ul>
<li>Questo mostrer√† la citazione al giocatore</li>
</ul></li>
<li>Si imposta <code>className</code> del primo elemento <code>span</code> a <code>highlight</code> per evidenziarlo in giallo</li>
<li>Si pulisce <code>messageElement</code> impostando <code>innerText</code> a <code>''</code></li>
</ul></li>
<li>Impostazione della casella di testo
<ul>
<li>Si cancella il valore (<code>value</code>) corrente su <code>typedValueElement</code></li>
<li>Si imposta l‚Äôelemento (<code>focus</code>) su <code>typedValueElement</code></li>
</ul></li>
<li>Su avvia il timer chiamando <code>getTime</code></li>
</ul>
<h3 id="aggiungere-la-logica-di-digitazione">Aggiungere la logica di digitazione</h3>
<p>Man mano che il giocatore digita, verr√† generato un evento di <code>input</code> . Questo event listener verificher√† che il giocatore stia digitando correttamente la parola e gestir√† lo stato corrente del gioco. Tornando a <strong>script.js</strong>, aggiungere il codice seguente alla fine. Verr√† analizzato in seguito.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="co">// in fondo a script.js</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="va">typedValueElement</span>.<span class="at">addEventListener</span>(<span class="st">&#39;input&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-3" title="3">  <span class="co">// Ottiene la parola corrente</span></a>
<a class="sourceLine" id="cb7-4" title="4">  <span class="kw">const</span> currentWord <span class="op">=</span> words[wordIndex]<span class="op">;</span></a>
<a class="sourceLine" id="cb7-5" title="5">  <span class="co">// Ottiene il valore corrente</span></a>
<a class="sourceLine" id="cb7-6" title="6">  <span class="kw">const</span> typedValue <span class="op">=</span> <span class="va">typedValueElement</span>.<span class="at">value</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-7" title="7"></a>
<a class="sourceLine" id="cb7-8" title="8">  <span class="cf">if</span> (typedValue <span class="op">===</span> currentWord <span class="op">&amp;&amp;</span> wordIndex <span class="op">===</span> <span class="va">words</span>.<span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-9" title="9">    <span class="co">// fine della frase</span></a>
<a class="sourceLine" id="cb7-10" title="10">    <span class="co">// Visualizza messaggio di successo</span></a>
<a class="sourceLine" id="cb7-11" title="11">    <span class="kw">const</span> elapsedTime <span class="op">=</span> <span class="kw">new</span> <span class="at">Date</span>().<span class="at">getTime</span>() <span class="op">-</span> startTime<span class="op">;</span></a>
<a class="sourceLine" id="cb7-12" title="12">    <span class="kw">const</span> message <span class="op">=</span> <span class="vs">`CONGRATULAZIONI! Hai finito in </span><span class="sc">${</span>elapsedTime / <span class="dv">1000</span><span class="sc">}</span><span class="vs"> secondi.`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-13" title="13">    <span class="va">messageElement</span>.<span class="at">innerText</span> <span class="op">=</span> message<span class="op">;</span></a>
<a class="sourceLine" id="cb7-14" title="14">  <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> (<span class="va">typedValue</span>.<span class="at">endsWith</span>(<span class="st">&#39; &#39;</span>) <span class="op">&amp;&amp;</span> <span class="va">typedValue</span>.<span class="at">trim</span>() <span class="op">===</span> currentWord) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-15" title="15">    <span class="co">// fine della parola</span></a>
<a class="sourceLine" id="cb7-16" title="16">    <span class="co">// pulisce typedValueElement per la nuova parola</span></a>
<a class="sourceLine" id="cb7-17" title="17">    <span class="va">typedValueElement</span>.<span class="at">value</span> <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-18" title="18">    <span class="co">// si sposta alla parola successiva</span></a>
<a class="sourceLine" id="cb7-19" title="19">    wordIndex<span class="op">++;</span></a>
<a class="sourceLine" id="cb7-20" title="20">    <span class="co">// reimposta il nome della classe per tutti gli elementi in quote</span></a>
<a class="sourceLine" id="cb7-21" title="21">    <span class="cf">for</span> (<span class="kw">const</span> wordElement <span class="kw">of</span> <span class="va">quoteElement</span>.<span class="at">childNodes</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-22" title="22">      <span class="va">wordElement</span>.<span class="at">className</span> <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-23" title="23">    <span class="op">}</span></a>
<a class="sourceLine" id="cb7-24" title="24">    <span class="co">// evidenzia la nuova parola</span></a>
<a class="sourceLine" id="cb7-25" title="25">    <span class="va">quoteElement</span>.<span class="at">childNodes</span>[wordIndex].<span class="at">className</span> <span class="op">=</span> <span class="st">&#39;highlight&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-26" title="26">  <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> (<span class="va">currentWord</span>.<span class="at">startsWith</span>(typedValue)) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-27" title="27">    <span class="co">// attualmente corretto</span></a>
<a class="sourceLine" id="cb7-28" title="28">    <span class="co">// evidenzia la parola successiva</span></a>
<a class="sourceLine" id="cb7-29" title="29">    <span class="va">typedValueElement</span>.<span class="at">className</span> <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-30" title="30">  <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-31" title="31">    <span class="co">// stato di errore</span></a>
<a class="sourceLine" id="cb7-32" title="32">    <span class="va">typedValueElement</span>.<span class="at">className</span> <span class="op">=</span> <span class="st">&#39;error&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-33" title="33">  <span class="op">}</span></a>
<a class="sourceLine" id="cb7-34" title="34"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Ora si analizzer√† il codice! Si inizia catturando la parola corrente e il valore che il giocatore ha digitato finora. Quindi si ha una logica a cascata, dove si controlla se la citazione √® completa, la parola √® completa, la parola √® corretta o (finalmente), se c‚Äô√® un errore.</p>
<ul>
<li>La citazione √® completa, indicata da <code>typedValue</code> che √® uguale a <code>currentWord</code> e <code>wordIndex</code> √® uguale a uno meno la lunghezza <code>length</code> delle parole (<code>words</code>)
<ul>
<li>Si calcola <code>elapsedTime</code> sottraendo <code>startTime</code> dall‚Äôorario corrente</li>
<li>Si divide <code>elapsedTime</code> per 1.000 per convertire da millisecondi a secondi</li>
<li>Si visualizza un messaggio di successo</li>
</ul></li>
<li>La parola √® completa, indicata da <code>typedValue</code> che termina con uno spazio (la fine di una parola) e <code>typedValue</code> √® uguale a <code>currentWord</code>
<ul>
<li>imposta il valore (<code>value</code>) di <code>typedElement</code> a <code>" "</code> per consentire la digitazione della parola successiva</li>
<li>Si incrementa <code>wordIndex</code> per passare alla parola successiva</li>
<li>Si itera su tutti i nodi figli <code>childNode</code> di <code>quoteElement</code> per impostare <code>className</code> a <code>""</code> per tornare alla visualizzazione predefinita</li>
<li>Si imposta <code>className</code> della parola corrente per evidenziarla a <code>highlight</code> per contrassegnarla come parola successiva da digitare</li>
</ul></li>
<li>La parola (<code>word</code>) √® attualmente digitata correttamente (ma non √® completa), indicato da <code>currentWord</code> che deve iniziare con il contenuto di <code>typedValue</code>
<ul>
<li>Ci si assicura che <code>typedValueElement</code> sia visualizzato nel modo predefinito cancellando <code>className</code></li>
</ul></li>
<li>Se si √® arrivati fin qui, si ha un errore
<ul>
<li>Si imposta <code>className</code> per <code>typedValueElement</code> su <code>error</code></li>
</ul></li>
</ul>
<h2 id="verificare-lapplicazione">Verificare l‚Äôapplicazione</h2>
<p>Si √® arrivati alla fine! L‚Äôultimo passaggio √® assicurarsi che la propria applicazione funzioni. Fare una prova! Non ci si deve preoccupare se ci sono errori; <strong>tutti gli sviluppatori</strong> fanno errori. Esaminare i messaggi ed eseguire il debug secondo necessit√†.</p>
<p>Fare clic su <strong>Start</strong> e iniziare a digitare! Dovrebbe assomigliare un po‚Äô all‚Äôanimazione vista prima.</p>
<figure>
<img src="../../images/demo.gif" alt="Animazione del gioco in azione" /><figcaption>Animazione del gioco in azione</figcaption>
</figure>
<hr />
<h2 id="sfida">üöÄ Sfida</h2>
<p>Aggiungere pi√π funzionalit√†</p>
<ul>
<li>Disabilitare l‚Äôevent listener per l‚Äôevento di <code>input</code> al completamento e riattivarlo quando si fa clic sul pulsante</li>
<li>Disabilitare la casella di testo quando il giocatore completa la citazione</li>
<li>Visualizzare una finestra di dialogo modale con il messaggio di successo</li>
<li>Memorizzare i punteggi migliori utilizzando <a href="https://developer.mozilla.org/docs/Web/API/Window/localStorage">localStorage</a></li>
</ul>
<h2 id="quiz-post-lezione">Quiz Post-Lezione</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/22?loc=it">Quiz post-lezione</a></p>
<h2 id="revisione-e-auto-apprendimento">Revisione e Auto Apprendimento</h2>
<p>Informarsi su <a href="https://developer.mozilla.org/docs/Web/Events">tutti gli eventi disponibili</a> per lo sviluppatore tramite il browser web e considerare gli scenari nei quali si userebbe ciascuno di essi.</p>
<h2 id="compito">Compito</h2>
<p><a href="assignment.it.md">Creazione di un nuovo gioco con la tastiera</a></p>
</body>
</html>
