<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README.zh-tw</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="å»ºç«‹éŠ€è¡Œç¶²é æ‡‰ç”¨ç¨‹å¼-part-3å–å¾—ä¸¦ä½¿ç”¨è³‡æ–™">å»ºç«‹éŠ€è¡Œç¶²é æ‡‰ç”¨ç¨‹å¼ Part 3ï¼šå–å¾—ä¸¦ä½¿ç”¨è³‡æ–™</h1>
<h2 id="èª²å‰æ¸¬é©—">èª²å‰æ¸¬é©—</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/45?loc=zh_tw">èª²å‰æ¸¬é©—</a></p>
<h3 id="å¤§ç¶±">å¤§ç¶±</h3>
<p>æ¯ä¸€å€‹ç¶²é æ‡‰ç”¨ç¨‹å¼çš„æ ¸å¿ƒç‚º<em>è³‡æ–™</em>ã€‚è³‡æ–™æœ‰å¾ˆå¤šç¨®æ ¼å¼ï¼Œä½†å®ƒå€‘çš„ç›®çš„éƒ½æ˜¯ç‚ºäº†é¡¯ç¤ºä½¿ç”¨è€…éœ€è¦çš„è³‡è¨Šã€‚ç¶²é æ‡‰ç”¨ç¨‹å¼è®Šå¾—é«˜äº’å‹•æ€§èˆ‡è¤‡é›œï¼Œä½¿ç”¨è€…å¦‚ä½•å–å¾—å…§å®¹ä¸¦èˆ‡ä¹‹é€²è¡Œäº’å‹•è®Šæˆç¶²é é–‹ç™¼é‡è¦çš„ä¸€ç’°ã€‚</p>
<p>åœ¨é€™å ‚èª²ä¸­ï¼Œæˆ‘å€‘æœƒäº†è§£ä¼ºæœå™¨æ˜¯å¦‚ä½•éåŒæ­¥åœ°å–å¾—è³‡æ–™ï¼Œä¸¦åœ¨ä¸é‡æ–°è¼‰å…¥ HTML çš„æƒ…æ³ä¸‹ï¼Œåˆ©ç”¨é€™äº›è³‡æ–™é¡¯ç¤ºåœ¨ç¶²é ä¸Šã€‚</p>
<h3 id="é–‹å§‹ä¹‹å‰">é–‹å§‹ä¹‹å‰</h3>
<p>ä½ éœ€è¦å…ˆå®Œæˆç³»åˆ—èª²ç¨‹ â”€â”€ <a href="../../2-forms/translations/README.zh-tw.md">ç™»å…¥èˆ‡è¨»å†Šè¡¨å–®</a>ã€‚ä½ é‚„éœ€è¦å®‰è£ <a href="https://nodejs.org">Node.js</a> ä¸¦<a href="../../api/translations/README.zh-tw.md">åŸ·è¡Œä¼ºæœå™¨ API</a>ã€‚</p>
<p>ä½ å¯ä»¥æ¸¬è©¦ä¼ºæœå™¨æ˜¯å¦é‹ä½œæ­£å¸¸ï¼Œåœ¨çµ‚ç«¯æ©Ÿä¸­è¼¸å…¥æŒ‡ä»¤ï¼š</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">curl</span> http://localhost:5000/api</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co"># -&gt; æœƒå›å‚³çµæœ &quot;Bank API v1.0.0&quot;</span></a></code></pre></div>
<hr />
<h2 id="ajax-å’Œå–å¾—è³‡æ–™">AJAX å’Œå–å¾—è³‡æ–™</h2>
<p>å‚³çµ±çš„ç¶²é åœ¨ä½¿ç”¨è€…é»æ“Šé€£çµï¼Œæˆ–æ˜¯æäº¤è¡¨å–®è³‡æ–™æ™‚ï¼Œé‡æ–°è¼‰å…¥å…¨éƒ¨çš„ HTML é é¢ä¾†æ›´æ–°ç¶²é å…§å®¹ã€‚æ¯ç•¶è³‡æ–™è¦è¢«æ›´æ–°æ™‚ï¼Œä¼ºæœå™¨å°±éœ€è¦å›å‚³å…¨æ–°çš„ HTML é é¢çµ¦ç€è¦½å™¨è™•ç†ï¼ŒåŒæ™‚ä¹Ÿå¹²æ¶‰åˆ°ä½¿ç”¨è€…æ­£åœ¨é€²è¡Œçš„å‹•ä½œï¼Œé‡æ–°è¼‰å…¥çš„æ©Ÿåˆ¶ä¹Ÿé™åˆ¶äº†è¨±å¤šäº’å‹•åŠŸèƒ½ã€‚é€™ç¨®å·¥ä½œæµç¨‹è¢«ç¨±ç‚º<em>å¤šé é¢æ‡‰ç”¨ç¨‹å¼(Multi-Page Application)</em>ï¼Œç°¡ç¨± <em>MPA</em>ã€‚</p>
<figure>
<img src="../images/mpa.png" alt="å¤šé é¢æ‡‰ç”¨ç¨‹å¼çš„æ›´æ–°æµç¨‹" /><figcaption>å¤šé é¢æ‡‰ç”¨ç¨‹å¼çš„æ›´æ–°æµç¨‹</figcaption>
</figure>
<p>ç¶²é æ‡‰ç”¨ç¨‹å¼è®Šå¾—æ›´åŠ è¤‡é›œï¼Œä¿ƒä½¿æ–°çš„æŠ€è¡“å•ä¸–ï¼š<a href="https://zh.wikipedia.org/wiki/AJAX">AJAX (Asynchronous JavaScript and XML)</a>ã€‚</p>
<p>é€™å€‹æŠ€å·§å…è¨±ç¶²é æ‡‰ç”¨ç¨‹å¼ä½¿ç”¨ JavaScript éåŒæ­¥åœ°å‚³éèˆ‡æ¥æ”¶ä¼ºæœå™¨çš„è³‡æ–™ï¼Œä¸éœ€è¦é‡æ–°è¼‰å…¥ HTML é é¢ï¼Œä¹Ÿåæ˜ åœ¨æ›´å¿«é€Ÿçš„æ›´æ–°é€Ÿç‡èˆ‡æ›´æµæš¢çš„ä½¿ç”¨è€…é«”é©—ã€‚åœ¨æ¥æ”¶ä¼ºæœå™¨çš„æ–°è³‡æ–™æ™‚ï¼Œç›®å‰çš„ HTML é é¢å¯ä»¥è¢« JavaScript åˆ©ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model">DOM</a> API æ›´æ–°ã€‚è‡ªæ­¤ä¹‹å¾Œï¼Œé€™ç¨®æµç¨‹æ¼”è®Šæˆç¾ä»Šçš„<a href="https://zh.wikipedia.org/wiki/%E5%8D%95%E9%A1%B5%E5%BA%94%E7%94%A8"><em>å–®ä¸€é é¢æ‡‰ç”¨ç¨‹å¼(Single-Page Application)</em>ï¼Œ<em>SPA</em></a>ã€‚</p>
<figure>
<img src="../images/spa.png" alt="å–®ä¸€é é¢æ‡‰ç”¨ç¨‹å¼çš„æ›´æ–°æµç¨‹" /><figcaption>å–®ä¸€é é¢æ‡‰ç”¨ç¨‹å¼çš„æ›´æ–°æµç¨‹</figcaption>
</figure>
<p>åœ¨ AJAX æ—©æœŸï¼Œå”¯ä¸€å–å¾—è³‡æ–™çš„ API ç‚º <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest"><code>XMLHttpRequest</code></a>ã€‚ä½†ç•¶ä»£çš„ç€è¦½å™¨å·²ç¶“å»ºç«‹å‡ºæ›´æ–¹ä¾¿ä¸”å¼·å¤§çš„ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API"><code>Fetch</code> API</a>ï¼Œå®ƒå€‘ä½¿ç”¨ Promises ç‰©ä»¶ä¸”æ›´é©åˆæ‡‰ç”¨åœ¨ JSON è³‡æ–™ä¸Šã€‚</p>
<blockquote>
<p>è¨±å¤šç•¶ä»£ç€è¦½å™¨æ”¯æ´ <code>Fetch API</code>ï¼Œå¦‚æœä½ æƒ³ç¢ºèªä½ çš„ç¶²é æ‡‰ç”¨ç¨‹å¼æ˜¯å¦é‹ä½œåœ¨èˆŠæ¬¾çš„ç€è¦½å™¨ï¼Œæª¢æŸ¥<a href="https://caniuse.com/fetch">caniuse.com ä¸Šçš„ç›¸å®¹æ€§æ¸¬è©¦</a>æ˜¯ä¸€å€‹å¥½æ–¹æ³•ã€‚</p>
</blockquote>
<h3 id="èª²é¡Œ">èª²é¡Œ</h3>
<p>åœ¨<a href="../../2-forms/translations/README.zh-tw.md">å‰ä¸€å ‚èª²ç¨‹ä¸­</a>ï¼Œæˆ‘å€‘è£½ä½œå‡ºè¨»å†Šè¡¨å–®ä¾†å»ºç«‹æ–°å¸³æˆ¶ã€‚ç¾åœ¨æˆ‘å€‘ä¾†åŠ å…¥æ–°ç¨‹å¼ï¼Œä½¿ç”¨ç¾æœ‰çš„å¸³æˆ¶ç™»å…¥ï¼Œä¸¦å–å¾—å…¶ç›¸é—œè³‡æ–™ã€‚é–‹å•Ÿæª”æ¡ˆ <code>app.js</code>ä¸¦æ–°å¢å‡½å¼ <code>login</code>ï¼š</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">async</span> <span class="kw">function</span> <span class="at">login</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="kw">const</span> loginForm <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;loginForm&#39;</span>)</a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="kw">const</span> user <span class="op">=</span> <span class="va">loginForm</span>.<span class="va">user</span>.<span class="at">value</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>ç¾åœ¨æˆ‘å€‘åˆ©ç”¨ <code>getElementById()</code> æ¥æ”¶è¡¨å–®å…ƒç´ ï¼Œä¸¦è—‰ç”± <code>loginForm.user.value</code> å–å¾—è¼¸å…¥æ¡†å…§çš„ä½¿ç”¨è€…åç¨±ã€‚æ¯ä¸€å€‹è¡¨å–®æ§åˆ¶å¯ä»¥ä»¥å„è‡ªåç¨±(å³ HTML å…§çš„ <code>name</code> å±¬æ€§)ä¾†å­˜å–ã€‚</p>
<p>å°±åƒæˆ‘å€‘ç‚ºè¨»å†Šå¸³æˆ¶ä½œçš„äº‹ä¸€æ¨£ï¼Œæˆ‘å€‘å»ºç«‹å¦ä¸€å€‹å‡½å¼ä¾†åŸ·è¡Œä¼ºæœå™¨è«‹æ±‚ï¼Œä½†é€™æ¬¡æ˜¯ç‚ºäº†å–å¾—å¸³æˆ¶è³‡æ–™ï¼š</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">async</span> <span class="kw">function</span> <span class="at">getAccount</span>(user) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-3" title="3">    <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">fetch</span>(<span class="st">&#39;//localhost:5000/api/accounts/&#39;</span> <span class="op">+</span> <span class="at">encodeURIComponent</span>(user))<span class="op">;</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="cf">return</span> <span class="cf">await</span> <span class="va">response</span>.<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="op">}</span> <span class="cf">catch</span> (error) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-6" title="6">    <span class="cf">return</span> <span class="op">{</span> <span class="dt">error</span><span class="op">:</span> <span class="va">error</span>.<span class="at">message</span> <span class="op">||</span> <span class="st">&#39;Unknown error&#39;</span> <span class="op">};</span></a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="op">}</span></a></code></pre></div>
<p>æˆ‘å€‘ä½¿ç”¨ <code>fetch</code> API ä¾†å‘ä¼ºæœå™¨åšéåŒæ­¥è³‡æ–™è«‹æ±‚ã€‚é€™æ¬¡æˆ‘å€‘ä¸éœ€è¦æ·»åŠ é¡å¤–çš„åƒæ•¸ï¼Œå¦‚ç¶²å€ï¼Œæˆ‘å€‘åªè©¢å•è³‡æ–™å…§å®¹ã€‚é è¨­ä¸Šï¼Œ<code>fetch</code> å»ºç«‹å‡º <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/GET"><code>GET</code></a> HTTP è«‹æ±‚ï¼Œå³æˆ‘å€‘æƒ³åšçš„äº‹æƒ…ã€‚</p>
<p>âœ… å‡½å¼ <code>encodeURIComponent()</code> å¯ä»¥è½‰æ›ç¶²å€å…§çš„ç‰¹æ®Šå­—å…ƒã€‚å¦‚æœæˆ‘å€‘ä¸å‘¼å«é€™å€‹å‡½å¼ï¼Œè€Œæ˜¯ç›´æ¥å°‡ <code>user</code> é€™é …æ•¸å€¼æ”¾å…¥ç¶²å€ä¸­ï¼Œé€™æœƒç™¼ç”Ÿä»€éº¼å•é¡Œï¼Ÿ</p>
<p>è®“æˆ‘å€‘ä¾†æ›´æ–°å‡½å¼ <code>login</code>ï¼Œä½¿ç”¨ <code>getAccount</code>ï¼š</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">async</span> <span class="kw">function</span> <span class="at">login</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="kw">const</span> loginForm <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;loginForm&#39;</span>)</a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="kw">const</span> user <span class="op">=</span> <span class="va">loginForm</span>.<span class="va">user</span>.<span class="at">value</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4">  <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> <span class="at">getAccount</span>(user)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-5" title="5"></a>
<a class="sourceLine" id="cb4-6" title="6">  <span class="cf">if</span> (<span class="va">data</span>.<span class="at">error</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-7" title="7">    <span class="cf">return</span> <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;loginError&#39;</span><span class="op">,</span> <span class="va">data</span>.<span class="at">error</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb4-9" title="9"></a>
<a class="sourceLine" id="cb4-10" title="10">  account <span class="op">=</span> data<span class="op">;</span></a>
<a class="sourceLine" id="cb4-11" title="11">  <span class="at">navigate</span>(<span class="st">&#39;/dashboard&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="op">}</span></a></code></pre></div>
<p>é¦–å…ˆï¼Œ<code>getAccount</code> æ˜¯ä¸€å€‹éåŒæ­¥å‡½å¼ï¼Œå®ƒåˆ©ç”¨é—œéµå­— <code>await</code> ç­‰å¾…ä¼ºæœå™¨çš„å›å‚³çµæœã€‚å°±å¦‚å…¶ä»–ä¼ºæœå™¨è«‹æ±‚ä¸€æ¨£ï¼Œæˆ‘å€‘ä¹Ÿå¿…é ˆè¦è™•ç†éŒ¯èª¤çš„æƒ…æ³ã€‚ç¾åœ¨æˆ‘å€‘åªåŠ éŒ¯èª¤è¨Šæ¯çµ¦é€™äº›æƒ…æ³ï¼Œä¹‹å¾Œå†å›éé ­è§£æ±ºé€™äº›å•é¡Œã€‚</p>
<p>æ¥è‘—ï¼Œæˆ‘å€‘å¿…é ˆå„²å­˜è³‡æ–™ï¼Œåœ¨ä¹‹å¾Œå¯ä»¥è¼¸å‡ºæˆå„€è¡¨æ¿çš„è³‡è¨Šã€‚ç›®å‰è®Šæ•¸ <code>account</code> é‚„æ²’å­˜åœ¨ï¼Œæˆ‘å€‘å»ºç«‹å®ƒçš„å…¨åŸŸè®Šæ•¸åœ¨æª”æ¡ˆæœ€ä¸Šæ–¹ï¼š</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">let</span> account <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></a></code></pre></div>
<p>åœ¨ç”¨æˆ¶è³‡æ–™å­˜åˆ°è®Šæ•¸ä¸­å¾Œï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨å‡½å¼ <code>navigate()</code> å¾<em>ç™»å…¥</em>é é¢åˆ‡æ›åˆ°<em>å„€è¡¨æ¿</em>é é¢ã€‚</p>
<p>æœ€å¾Œï¼Œåœ¨ç™»å…¥è¡¨å–®æäº¤æ™‚ï¼Œå‘¼å«å‡½å¼ <code>login</code>ã€‚ä¿®æ”¹ HTML èªæ³•ï¼š</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">&lt;form</span><span class="ot"> id=</span><span class="st">&quot;loginForm&quot;</span><span class="ot"> action=</span><span class="st">&quot;javascript:login()&quot;</span><span class="kw">&gt;</span></a></code></pre></div>
<p>æ¸¬è©¦è¨»å†ŠåŠŸèƒ½ï¼Œä»¥åŠæ–°è¨»å†Šçš„å¸³æˆ¶çš„ç™»å…¥è¡Œç‚ºæ˜¯å¦é‹ä½œæ­£å¸¸ã€‚</p>
<p>åœ¨é€²è¡Œä¸‹ä¸€æ­¥é©Ÿå‰ï¼Œæˆ‘å€‘é‚„å¿…é ˆå®Œæˆå‡½å¼ <code>register</code>ã€‚åœ¨æ­¤å‡½å¼çš„æœ€ä¸‹æ–¹åŠ å…¥ï¼š</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1">account <span class="op">=</span> result<span class="op">;</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="at">navigate</span>(<span class="st">&#39;/dashboard&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p>âœ… ä½ çŸ¥é“åœ¨é è¨­ä¸Šï¼Œä½ åªèƒ½å¾<em>åŒä¸€å€‹ç¶²åŸŸ(domain)èˆ‡é€£æ¥åŸ (port)</em>çš„ç¶²é å‘¼å«ä¼ºæœå™¨ APIså—ï¼Ÿé€™æ˜¯ç€è¦½å™¨å¼·åˆ¶æ€§çš„å®‰å…¨æ©Ÿåˆ¶ã€‚ä½†æˆ‘å€‘çš„ç¶²é æ‡‰ç”¨ç¨‹å¼åœ¨ <code>localhost:3000</code> ä¸ŠåŸ·è¡Œï¼Œè€Œä¼ºæœå™¨ API å‰‡åœ¨ <code>localhost:5000</code> ä¸ŠåŸ·è¡Œã€‚ç‚ºä»€éº¼é€™æ¨£èƒ½æ­£å¸¸é‹ä½œï¼Ÿåˆ©ç”¨<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">è·¨ä¾†æºè³‡æºå…±ç”¨ (CORS)</a>ï¼Œåªè¦ä¼ºæœå™¨æ·»åŠ ç‰¹æ®Šçš„æ¨™é ­æª”åˆ°ç¶²é å›æ‡‰ä¸­ï¼Œæˆ‘å€‘å°±å¯ä»¥è™•ç†è·¨è³‡æºçš„ HTTP è«‹æ±‚ï¼Œå…è¨±ç‰¹æ®Šçš„ç¶²åŸŸé€²è¡Œå‘¼å«ã€‚</p>
<blockquote>
<p>è—‰ç”±å‰å¾€<a href="https://docs.microsoft.com/en-us/learn/modules/use-apis-discover-museum-art?WT.mc_id=academic-13441-cxa">æ­¤èª²ç¨‹</a>å­¸ç¿’æ›´å¤šæœ‰é—œ API çš„è³‡è¨Šã€‚</p>
</blockquote>
<h2 id="æ›´æ–°-html-é¡¯ç¤ºè³‡æ–™">æ›´æ–° HTML é¡¯ç¤ºè³‡æ–™</h2>
<p>ç¾åœ¨å–å¾—å®Œç”¨æˆ¶è³‡æ–™ï¼Œæˆ‘å€‘å¿…é ˆæ›´æ–°åˆ°ç¾æœ‰çš„ HTML ä¸Šã€‚æˆ‘å€‘å·²ç¶“çŸ¥é“å¦‚ä½•æ¥æ”¶ DOM çš„å…ƒç´ ï¼Œä¾‹å­ç‚º <code>document.getElementById()</code>ã€‚åªè¦ä½ æœ‰å…ƒç´ ï¼Œé€™é‚Šæœ‰ä¸€äº› API è®“ä½ ä¿®æ”¹ï¼Œæˆ–æ˜¯æ–°å¢å­å…ƒç´ ä¸Šå»ï¼š</p>
<ul>
<li><p>ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent"><code>textContent</code></a> å±¬æ€§ï¼Œä½ å¯ä»¥æ”¹è®Šå…ƒç´ çš„æ–‡å­—å…§å®¹ã€‚æ³¨æ„æ”¹è®Šæ­¤æ•¸å€¼æœƒåˆªé™¤å®ƒçš„æ‰€æœ‰å­å…ƒç´ (è‹¥å­˜åœ¨çš„è©±)ï¼Œä¸¦ä»¥è©²æ–‡å­—å…§å®¹ä¾†æ›¿æ›å®ƒã€‚åŒæ™‚ï¼Œé€™ä¹Ÿæ˜¯å€‹æœ‰æ•ˆçš„æ–¹æ³•ä¾†åˆªå»æ‰€æœ‰çš„å­æˆå“¡ï¼Œåªè¦è³¦äºˆå®ƒç©ºå­—ä¸² <code>''</code>ã€‚</p></li>
<li><p>ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement"><code>document.createElement()</code></a> èˆ‡ <a href="https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/append"><code>append()</code></a> é€™å…©æ–¹æ³•ï¼Œä½ å¯ä»¥å»ºç«‹ä¸¦æ¥ä¸Šä¸€åˆ°å¤šå€‹å­å…ƒç´ æˆå“¡ã€‚</p></li>
</ul>
<p>âœ… ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML"><code>innerHTML</code></a> å…ƒç´ å±¬æ€§ä¹Ÿèƒ½æ”¹è®Š HTML çš„å…§å®¹ï¼Œä½†é€™æ–¹æ³•è¦é¿å…ä½¿ç”¨ã€‚é€™å¯èƒ½æœƒé­é‡æœ‰é—œ<a href="https://developer.mozilla.org/en-US/docs/Glossary/Cross-site_scripting">è·¨ç¶²ç«™æŒ‡ä»¤ç¢¼ (XSS)</a>çš„æ”»æ“Šã€‚</p>
<h3 id="èª²é¡Œ-1">èª²é¡Œ</h3>
<p>åœ¨ä¾†åˆ°å„€è¡¨æ¿ç•«é¢ä¹‹å‰ï¼Œæˆ‘å€‘é‚„éœ€è¦å¹«<em>ç™»å…¥</em>é é¢åŠ ä¸€ä»¶äº‹ã€‚ç›®å‰ï¼Œå¦‚æœä½ è©¦è‘—ä½¿ç”¨ä¸å­˜åœ¨çš„å¸³æˆ¶é€²è¡Œç™»å…¥ï¼Œè¨Šæ¯åªæœƒå‡ºç¾åœ¨å‘½ä»¤æ¬„ä¸­ï¼Œè€Œä½¿ç”¨è€…ä¸æœƒç™¼è¦ºåˆ°ä»»ä½•äº‹æƒ…æ”¹è®Šï¼Œä¹Ÿä¸æ¸…æ¥šç¶²é ç™¼ç”Ÿäº†ä»€éº¼äº‹ã€‚</p>
<p>æˆ‘å€‘åœ¨ç™»å…¥è¡¨å–®ä¸­æ–°å¢é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯çš„åœ°æ–¹ã€‚æœ€å¥½çš„åœ°æ–¹ç‚ºç™»å…¥æŒ‰éˆ• <code>&lt;button&gt;</code> ä¹‹å‰ï¼š</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb8-1" title="1">...</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;loginError&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="kw">&lt;button&gt;</span>Login<span class="kw">&lt;/button&gt;</span></a>
<a class="sourceLine" id="cb8-4" title="4">...</a></code></pre></div>
<p>é€™å€‹ <code>&lt;div&gt;</code> å…ƒç´ ç‚ºç©ºçš„ï¼Œä»£è¡¨è‘—ç•«é¢ä¸æœƒå°å‡ºä»»ä½•è¨Šæ¯ï¼Œç›´åˆ°æˆ‘å€‘æ·»åŠ å…§å®¹é€²å»ã€‚æˆ‘å€‘é‚„çµ¦äº†å®ƒ <code>id</code>ï¼Œè®“ JavaScript å¯ä»¥å®¹æ˜“åœ°å­˜å–å®ƒã€‚</p>
<p>å›åˆ°æª”æ¡ˆ <code>app.js</code>ï¼Œå»ºç«‹æ–°çš„è£œåŠ©å‡½æ•¸ <code>updateElement</code>ï¼š</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">function</span> <span class="at">updateElement</span>(id<span class="op">,</span> text) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="kw">const</span> element <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(id)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-3" title="3">  <span class="va">element</span>.<span class="at">textContent</span> <span class="op">=</span> text<span class="op">;</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>é€™æ¢å°±å¾ˆç›´è§€ï¼šçµ¦å®šå…ƒç´ çš„ <em>id</em> èˆ‡ <em>text</em>ï¼Œå®ƒæœƒæ›´æ–° DOM å…ƒç´ å…§ç¬¦åˆ <code>id</code> æ¢ä»¶çš„æ–‡å­—å…§å®¹ã€‚æˆ‘å€‘ä¹Ÿä½¿ç”¨é€™å€‹æ–¹æ³•åˆ°å‰é¢ <code>login</code> å‡½å¼çš„éŒ¯èª¤è¨Šæ¯ä¸­ï¼š</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="cf">if</span> (<span class="va">data</span>.<span class="at">error</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="cf">return</span> <span class="at">updateElement</span>(<span class="st">&#39;loginError&#39;</span><span class="op">,</span> <span class="va">data</span>.<span class="at">error</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>ç¾åœ¨ï¼Œè©¦è‘—ä»¥ä¸åˆæ³•çš„å¸³æˆ¶é€²è¡Œç™»å…¥ï¼Œä½ æ‡‰è©²èƒ½çœ‹åˆ°åƒé€™æ¨£çš„ç•«é¢ï¼š</p>
<figure>
<img src="../images/login-error.png" alt="ç™»å…¥å‡ºç¾éŒ¯èª¤è¨Šæ¯ä¹‹æˆªåœ–" /><figcaption>ç™»å…¥å‡ºç¾éŒ¯èª¤è¨Šæ¯ä¹‹æˆªåœ–</figcaption>
</figure>
<p>ç¾åœ¨æˆ‘å€‘å°å‡ºéŒ¯èª¤è¨Šæ¯ï¼Œä½†è¢å¹•å ±è®€å™¨ä¸¦æ²’æœ‰åšä»»ä½•å ±è®€ã€‚ç‚ºäº†è®“è¢«å‹•æ…‹åŠ å…¥çš„æ–‡å­—èƒ½è¢«è¢å¹•å ±è®€å™¨é–±è®€å‡ºä¾†ï¼Œæˆ‘å€‘éœ€è¦ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions">Live Region</a>ã€‚é€™é‚Šæˆ‘å€‘ä½¿ç”¨ä¸€ç¨® Live Region çš„é¡å‹ alertï¼š</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;loginError&quot;</span><span class="ot"> role=</span><span class="st">&quot;alert&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></a></code></pre></div>
<p>å»ºç«‹åŒæ¨£çš„è¡Œç‚ºåˆ°å‡½å¼ <code>register</code> çš„éŒ¯èª¤è¨Šæ¯ç•¶ä¸­ï¼Œä¹Ÿåˆ¥å¿˜äº†æ›´æ–°ä½ çš„ HTMLã€‚</p>
<h2 id="åœ¨å„€è¡¨æ¿é¡¯ç¤ºè³‡è¨Š">åœ¨å„€è¡¨æ¿é¡¯ç¤ºè³‡è¨Š</h2>
<p>ä½¿ç”¨åŒæ¨£çš„æŠ€å·§ï¼Œæˆ‘å€‘éœ€è¦å°‡å¸³æˆ¶è³‡è¨Šå°åœ¨å„€è¡¨æ¿é é¢ä¸­ã€‚</p>
<p>é€™æ˜¯å¾ä¼ºæœå™¨æ¥æ”¶åˆ°çš„å¸³æˆ¶è³‡æ–™ç‰©ä»¶ï¼š</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb12-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="dt">&quot;user&quot;</span><span class="fu">:</span> <span class="st">&quot;test&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-3" title="3">  <span class="dt">&quot;currency&quot;</span><span class="fu">:</span> <span class="st">&quot;$&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-4" title="4">  <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Test account&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-5" title="5">  <span class="dt">&quot;balance&quot;</span><span class="fu">:</span> <span class="dv">75</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-6" title="6">  <span class="dt">&quot;transactions&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb12-7" title="7">    <span class="fu">{</span> <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;1&quot;</span><span class="fu">,</span> <span class="dt">&quot;date&quot;</span><span class="fu">:</span> <span class="st">&quot;2020-10-01&quot;</span><span class="fu">,</span> <span class="dt">&quot;object&quot;</span><span class="fu">:</span> <span class="st">&quot;Pocket money&quot;</span><span class="fu">,</span> <span class="dt">&quot;amount&quot;</span><span class="fu">:</span> <span class="dv">50</span> <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb12-8" title="8">    <span class="fu">{</span> <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;2&quot;</span><span class="fu">,</span> <span class="dt">&quot;date&quot;</span><span class="fu">:</span> <span class="st">&quot;2020-10-03&quot;</span><span class="fu">,</span> <span class="dt">&quot;object&quot;</span><span class="fu">:</span> <span class="st">&quot;Book&quot;</span><span class="fu">,</span> <span class="dt">&quot;amount&quot;</span><span class="fu">:</span> <span class="dv">-10</span> <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb12-9" title="9">    <span class="fu">{</span> <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;3&quot;</span><span class="fu">,</span> <span class="dt">&quot;date&quot;</span><span class="fu">:</span> <span class="st">&quot;2020-10-04&quot;</span><span class="fu">,</span> <span class="dt">&quot;object&quot;</span><span class="fu">:</span> <span class="st">&quot;Sandwich&quot;</span><span class="fu">,</span> <span class="dt">&quot;amount&quot;</span><span class="fu">:</span> <span class="dv">-5</span> <span class="fu">}</span></a>
<a class="sourceLine" id="cb12-10" title="10">  <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="fu">}</span></a></code></pre></div>
<blockquote>
<p>ç­†è¨˜ï¼šç‚ºäº†è®“é–‹ç™¼æ›´åŠ çš„å®¹æ˜“ï¼Œä½ å¯ä»¥ä½¿ç”¨å·²ç¶“å­˜åœ¨è³‡æ–™çš„å¸³æˆ¶ <code>test</code>ã€‚</p>
</blockquote>
<h3 id="èª²é¡Œ-2">èª²é¡Œ</h3>
<p>æˆ‘å€‘é–‹å§‹ç½®æ›æ‰ HTML æª”å…§çš„ â€œBalanceâ€ å€åŸŸï¼ŒåŠ å…¥æ”¾ç½®å€ï¼š</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">&lt;section&gt;</span></a>
<a class="sourceLine" id="cb13-2" title="2">  Balance: <span class="kw">&lt;span</span><span class="ot"> id=</span><span class="st">&quot;balance&quot;</span><span class="kw">&gt;&lt;/span&gt;&lt;span</span><span class="ot"> id=</span><span class="st">&quot;currency&quot;</span><span class="kw">&gt;&lt;/span&gt;</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="kw">&lt;/section&gt;</span></a></code></pre></div>
<p>æˆ‘å€‘é‚„éœ€è¦åœ¨ä¸‹æ–¹æ–°å¢å€åŸŸä¾†é¡¯ç¤ºå¸³æˆ¶è³‡è¨Šï¼š</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">&lt;h2</span><span class="ot"> id=</span><span class="st">&quot;description&quot;</span><span class="kw">&gt;&lt;/h2&gt;</span></a></code></pre></div>
<p>âœ… è¡¨ç¤ºå¸³æˆ¶è³‡è¨Šçš„å‡½å¼å‰›å¥½ç‚ºåœ¨å…§å®¹çš„æ¨™é¡Œè™•ï¼Œæˆ‘å€‘å¯ä»¥å°‡å®ƒä½œç‚ºèªç¾©åŒ–çš„æ¨™é ­ã€‚å­¸ç¿’æ›´å¤šé—œæ–¼<a href="https://www.nomensa.com/blog/2017/how-structure-headings-web-accessibility">æ¨™é ­çµæ§‹</a>ï¼Œå®ƒå°æ–¼ç¶²é è¦ªå’ŒåŠ›æ ¼å¤–é‡è¦ï¼Œä¹Ÿæ˜é¡¯åœ°è¡¨é”å‡ºé é¢çš„æ¨™é ­ä½ç½®ã€‚</p>
<p>æ¥è‘—ï¼Œæˆ‘å€‘åœ¨ <code>app.js</code> æª”æ¡ˆä¸­åŠ å…¥æ–°çš„å‡½å¼ä¾†ç‚ºæ”¾ç½®å€æ–°å¢å…§å®¹ï¼š</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">function</span> <span class="at">updateDashboard</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb15-2" title="2">  <span class="cf">if</span> (<span class="op">!</span>account) <span class="op">{</span></a>
<a class="sourceLine" id="cb15-3" title="3">    <span class="cf">return</span> <span class="at">navigate</span>(<span class="st">&#39;/login&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-4" title="4">  <span class="op">}</span></a>
<a class="sourceLine" id="cb15-5" title="5"></a>
<a class="sourceLine" id="cb15-6" title="6">  <span class="at">updateElement</span>(<span class="st">&#39;description&#39;</span><span class="op">,</span> <span class="va">account</span>.<span class="at">description</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-7" title="7">  <span class="at">updateElement</span>(<span class="st">&#39;balance&#39;</span><span class="op">,</span> <span class="va">account</span>.<span class="va">balance</span>.<span class="at">toFixed</span>(<span class="dv">2</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb15-8" title="8">  <span class="at">updateElement</span>(<span class="st">&#39;currency&#39;</span><span class="op">,</span> <span class="va">account</span>.<span class="at">currency</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-9" title="9"><span class="op">}</span></a></code></pre></div>
<p>é¦–å…ˆï¼Œæˆ‘å€‘éœ€è¦å…ˆæª¢æŸ¥å¸³æˆ¶çš„è³‡æ–™ã€‚ä½¿ç”¨æˆ‘å€‘ä¹‹å‰å»ºç«‹çš„å‡½å¼ <code>updateElement()</code> ä¾†æ›´æ–° HTML æª”ã€‚</p>
<blockquote>
<p>ç‚ºäº†è®“å¸³æˆ¶é¤˜é¡æ¼‚äº®åœ°å‘ˆç¾ï¼Œæˆ‘å€‘ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed"><code>toFixed(2)</code></a> é€™å€‹æ–¹æ³•ï¼Œå¼·è¿«æ•¸å€¼åªé¡¯ç¤ºåˆ°å°æ•¸é»ç¬¬äºŒä½ã€‚</p>
</blockquote>
<p>ç¾åœ¨ï¼Œæ¯ç•¶å„€è¡¨æ¿è¢«è¼‰å…¥æ™‚ï¼Œæˆ‘å€‘å°±éœ€è¦å‘¼å«å‡½å¼ <code>updateDashboard()</code>ã€‚å¦‚æœä½ å·²ç¶“å®Œæˆ<a href="../../1-template-route/translations/assignment.zh-tw.md">èª²ç¨‹ä¸€çš„ä½œæ¥­</a>ï¼Œå°±ä¸éœ€è¦é¡å¤–åšè™•ç†ï¼Œä¸ç„¶ä½ å¯ä»¥ä½¿ç”¨æ¥ä¸‹ä¾†çš„è¨­å®šã€‚</p>
<p>åŠ å…¥é€™æ®µç¨‹å¼ç¢¼åˆ°å‡½å¼ <code>updateRoute()</code> çš„ä¸‹æ–¹ï¼š</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="cf">if</span> (<span class="kw">typeof</span> <span class="va">route</span>.<span class="at">init</span> <span class="op">===</span> <span class="st">&#39;function&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb16-2" title="2">  <span class="va">route</span>.<span class="at">init</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>ä¸¦æ›´æ–°è·¯ç”±å®šç¾©ï¼š</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1"><span class="kw">const</span> routes <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb17-2" title="2">  <span class="st">&#39;/login&#39;</span><span class="op">:</span> <span class="op">{</span> <span class="dt">templateId</span><span class="op">:</span> <span class="st">&#39;login&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb17-3" title="3">  <span class="st">&#39;/dashboard&#39;</span><span class="op">:</span> <span class="op">{</span> <span class="dt">templateId</span><span class="op">:</span> <span class="st">&#39;dashboard&#39;</span><span class="op">,</span> <span class="dt">init</span><span class="op">:</span> updateDashboard <span class="op">}</span></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="op">};</span></a></code></pre></div>
<p>åšå®Œé€™äº›æ›´å‹•å¾Œï¼Œç•¶å„€è¡¨æ¿è¦è¢«å‘ˆç¾æ™‚ï¼Œå‡½å¼ `updateDashboard() å°±æœƒè¢«å‘¼å«ã€‚åœ¨ä½ ç™»å…¥å¾Œå°±èƒ½çœ‹åˆ°å¸³æˆ¶çš„æè¿°ã€é¤˜é¡èˆ‡äº¤æ˜“ç‹€æ³ã€‚</p>
<h2 id="åˆ©ç”¨-html-æ¨¡æ¿å‹•æ…‹å»ºç«‹è¡¨æ ¼åˆ—">åˆ©ç”¨ HTML æ¨¡æ¿å‹•æ…‹å»ºç«‹è¡¨æ ¼åˆ—</h2>
<p>åœ¨<a href="../../1-template-route/translations/README.zh-tw.md">ç¬¬ä¸€å ‚èª²</a>ä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨ HTML æ¨¡æ¿èˆ‡æ–¹æ³• <a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild"><code>appendChild()</code></a> ä¾†åšå‡ºæ‡‰ç”¨ç¨‹å¼å…§çš„è½‰æ›ã€‚æ¨¡æ¿é‚„èƒ½åŸ·è¡Œæ›´å°è¦æ¨¡çš„è¡Œç‚ºï¼Œå‹•æ…‹åœ°æ”¹è®Šä¸€éƒ¨ä»½çš„é é¢</p>
<p>æˆ‘å€‘ä½¿ç”¨é¡ä¼¼çš„æ–¹å¼ä¾†é¡¯ç¤º HTML è¡¨æ ¼ä¸­çš„äº¤æ˜“æ¸…å–®ã€‚</p>
<h3 id="èª²é¡Œ-3">èª²é¡Œ</h3>
<p>åŠ å…¥æ–°çš„æ¨¡æ¿åˆ° HTML çš„ <code>&lt;body&gt;</code> ä¸­ï¼š</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb18-1" title="1"><span class="kw">&lt;template</span><span class="ot"> id=</span><span class="st">&quot;transaction&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb18-2" title="2">  <span class="kw">&lt;tr&gt;</span></a>
<a class="sourceLine" id="cb18-3" title="3">    <span class="kw">&lt;td&gt;&lt;/td&gt;</span></a>
<a class="sourceLine" id="cb18-4" title="4">    <span class="kw">&lt;td&gt;&lt;/td&gt;</span></a>
<a class="sourceLine" id="cb18-5" title="5">    <span class="kw">&lt;td&gt;&lt;/td&gt;</span></a>
<a class="sourceLine" id="cb18-6" title="6">  <span class="kw">&lt;/tr&gt;</span></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="kw">&lt;/template&gt;</span></a></code></pre></div>
<p>é€™å€‹æ¨¡æ¿è¡¨ç¤ºå–®ä¸€æ¢çš„è¡¨æ ¼åˆ—ï¼Œå…¶ä¸­åŒ…å«äº†ä¸‰æ ¼æ¬„ä½ï¼šäº¤æ˜“çš„<em>æ—¥æœŸ</em>ã€<em>ç‰©ä»¶</em> èˆ‡ <em>é‡‘é¡</em>ã€‚</p>
<p>æ¥è‘—ï¼ŒåŠ å…¥ <code>id</code> å±¬æ€§åˆ°æ¨¡æ¿çš„è¡¨æ ¼ <code>&lt;tbody&gt;</code> å…ƒç´ ä¸­ï¼Œè®“ JavaScript èƒ½æ›´å®¹æ˜“åœ°å–å¾—ï¼š</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">&lt;tbody</span><span class="ot"> id=</span><span class="st">&quot;transactions&quot;</span><span class="kw">&gt;&lt;/tbody&gt;</span></a></code></pre></div>
<p>ç•¶æˆ‘å€‘çš„ HTML æº–å‚™å¥½æ™‚ï¼Œæˆ‘å€‘åˆ‡æ›åˆ° JavaScript æª”æ¡ˆä¸­ï¼ŒåŠ å…¥æ–°å‡½å¼ <code>createTransactionRow</code>ï¼š</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb20-1" title="1"><span class="kw">function</span> <span class="at">createTransactionRow</span>(transaction) <span class="op">{</span></a>
<a class="sourceLine" id="cb20-2" title="2">  <span class="kw">const</span> template <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;transaction&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-3" title="3">  <span class="kw">const</span> transactionRow <span class="op">=</span> <span class="va">template</span>.<span class="va">content</span>.<span class="at">cloneNode</span>(<span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-4" title="4">  <span class="kw">const</span> tr <span class="op">=</span> <span class="va">transactionRow</span>.<span class="at">querySelector</span>(<span class="st">&#39;tr&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-5" title="5">  <span class="va">tr</span>.<span class="at">children</span>[<span class="dv">0</span>].<span class="at">textContent</span> <span class="op">=</span> <span class="va">transaction</span>.<span class="at">date</span><span class="op">;</span></a>
<a class="sourceLine" id="cb20-6" title="6">  <span class="va">tr</span>.<span class="at">children</span>[<span class="dv">1</span>].<span class="at">textContent</span> <span class="op">=</span> <span class="va">transaction</span>.<span class="at">object</span><span class="op">;</span></a>
<a class="sourceLine" id="cb20-7" title="7">  <span class="va">tr</span>.<span class="at">children</span>[<span class="dv">2</span>].<span class="at">textContent</span> <span class="op">=</span> <span class="va">transaction</span>.<span class="va">amount</span>.<span class="at">toFixed</span>(<span class="dv">2</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-8" title="8">  <span class="cf">return</span> transactionRow<span class="op">;</span></a>
<a class="sourceLine" id="cb20-9" title="9"><span class="op">}</span></a></code></pre></div>
<p>é€™å€‹å‡½å¼åšå°±å¦‚å®ƒåå­—çš„åŠŸèƒ½ï¼šè—‰ç”±å‰›å»ºç«‹çš„æ¨¡æ¿ï¼Œå»ºç«‹å‡ºæ–°çš„è¡¨æ ¼åˆ—ä¸¦å¡«å…¥äº¤æ˜“æ˜ç´°çš„è³‡æ–™ã€‚æˆ‘å€‘æœƒåœ¨å‡½å¼ <code>updateDashboard()</code> ä¸­ï¼Œåˆ©ç”¨å®ƒä¾†æ›´æ–°è¡¨æ ¼ï¼š</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb21-1" title="1"><span class="kw">const</span> transactionsRows <span class="op">=</span> <span class="va">document</span>.<span class="at">createDocumentFragment</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb21-2" title="2"><span class="cf">for</span> (<span class="kw">const</span> transaction <span class="kw">of</span> <span class="va">account</span>.<span class="at">transactions</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb21-3" title="3">  <span class="kw">const</span> transactionRow <span class="op">=</span> <span class="at">createTransactionRow</span>(transaction)<span class="op">;</span></a>
<a class="sourceLine" id="cb21-4" title="4">  <span class="va">transactionsRows</span>.<span class="at">appendChild</span>(transactionRow)<span class="op">;</span></a>
<a class="sourceLine" id="cb21-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb21-6" title="6"><span class="at">updateElement</span>(<span class="st">&#39;transactions&#39;</span><span class="op">,</span> transactionsRows)<span class="op">;</span></a></code></pre></div>
<p>é€™è£¡æˆ‘å€‘ä½¿ç”¨äº†æ–¹æ³• <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/createDocumentFragment"><code>document.createDocumentFragment()</code></a>ï¼Œå»ºç«‹æ–°çš„ DOM åˆ†æ®µï¼Œå†æ¥åˆ°æˆ‘å€‘çš„ HTML è¡¨æ ¼ä¸­ã€‚</p>
<p>æˆ‘å€‘é‚„éœ€è¦åšä¸€ä»¶äº‹æ‰èƒ½è®“ç¨‹å¼é‹ä½œæ­£å¸¸ï¼Œç›®å‰å‡½å¼ <code>updateElement()</code> åªèƒ½æ¥å—æ–‡å­—é¡å‹çš„å…§å®¹ã€‚æˆ‘å€‘ç¨å¾®ä¿®æ”¹ä¸€ä¸‹ç¨‹å¼ç¢¼ï¼š</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb22-1" title="1"><span class="kw">function</span> <span class="at">updateElement</span>(id<span class="op">,</span> textOrNode) <span class="op">{</span></a>
<a class="sourceLine" id="cb22-2" title="2">  <span class="kw">const</span> element <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(id)<span class="op">;</span></a>
<a class="sourceLine" id="cb22-3" title="3">  <span class="va">element</span>.<span class="at">textContent</span> <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span> <span class="co">// Removes all children</span></a>
<a class="sourceLine" id="cb22-4" title="4">  <span class="va">element</span>.<span class="at">append</span>(textOrNode)<span class="op">;</span></a>
<a class="sourceLine" id="cb22-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>æˆ‘å€‘ä½¿ç”¨æ–¹æ³• <a href="https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/append"><code>append()</code></a>ï¼Œå®ƒèƒ½é€£æ¥æ–‡å­—æˆ–è€…æ˜¯ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Node">DOM ç¯€é»</a>åˆ°çˆ¶å…ƒç´ ä¸­ï¼Œæ­£å¥½æ»¿è¶³æˆ‘å€‘çš„éœ€æ±‚ã€‚</p>
<p>è©¦è‘—ä»¥ <code>test</code> å¸³æˆ¶ä¾†ç™»å…¥ï¼Œä½ æ‡‰è©²èƒ½çœ‹åˆ°å„€è¡¨æ¿é¡¯ç¤ºå‡ºäº¤æ˜“æ˜ç´°äº† ğŸ‰ã€‚</p>
<hr />
<h2 id="æŒ‘æˆ°">ğŸš€ æŒ‘æˆ°</h2>
<p>èŠ±åŠŸå¤«è®“å„€è¡¨æ¿é é¢çœ‹èµ·ä¾†åƒæ˜¯æ­£è¦çš„éŠ€è¡Œç•Œé¢ã€‚å¦‚æœä½ å·²ç¶“ç‚ºä½ çš„æ‡‰ç”¨ç¨‹å¼åšå¥½é€ å‹ï¼Œä½ å¯ä»¥è©¦è©¦ <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries">media queries</a> ä¾†å»ºç«‹å‡º<a href="https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Responsive/responsive_design_building_blocks">å›æ‡‰å¼ç¶²é è¨­è¨ˆ</a>ï¼Œå®ƒèƒ½å®Œç¾åœ°å‘ˆç¾åœ¨é›»è…¦æˆ–æ˜¯è¡Œå‹•è£ç½®ä¸Šã€‚</p>
<p>é€™é‚Šæœ‰é€ å‹éå¾Œçš„å„€è¡¨æ¿ä¾‹å­ï¼š</p>
<figure>
<img src="../../images/screen2.png" alt="é€ å‹åŒ–å¾Œçš„å„€è¡¨æ¿æˆªåœ–" /><figcaption>é€ å‹åŒ–å¾Œçš„å„€è¡¨æ¿æˆªåœ–</figcaption>
</figure>
<h2 id="èª²å¾Œæ¸¬é©—">èª²å¾Œæ¸¬é©—</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/46?loc=zh_tw">èª²å¾Œæ¸¬é©—</a></p>
<h2 id="ä½œæ¥­">ä½œæ¥­</h2>
<p><a href="assignment.zh-tw.md">é‡æ§‹ä¸¦è¨»è§£ä½ çš„ç¨‹å¼ç¢¼</a></p>
</body>
</html>
