<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README.zh.tw</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="ç€è¦½å™¨æ“´å……åŠŸèƒ½å°ˆæ¡ˆ-part-1å­¸ç¿’èƒŒæ™¯å·¥ä½œèˆ‡æ•ˆèƒ½">ç€è¦½å™¨æ“´å……åŠŸèƒ½å°ˆæ¡ˆ Part 1ï¼šå­¸ç¿’èƒŒæ™¯å·¥ä½œèˆ‡æ•ˆèƒ½</h1>
<h2 id="èª²å‰æ¸¬é©—">èª²å‰æ¸¬é©—</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/27?loc=zh_tw">èª²å‰æ¸¬é©—</a></p>
<h3 id="å¤§ç¶±">å¤§ç¶±</h3>
<p>åœ¨å‰å…©å ‚èª²ç¨‹ä¸­ï¼Œä½ å­¸æœƒå¦‚ä½•å»ºç«‹è¡¨å–®ã€é¡¯ç¤º API å›è¦†çš„è³‡æ–™åœ¨çµæœå€å¡Šä¸­ï¼Œé€™æ˜¯ç¶²é è™•ç†ç¶²é è³‡è¨Šçš„æ¨™æº–è¡Œç‚ºã€‚ä½ ç”šè‡³å­¸æœƒäº†å¦‚ä½•éåŒæ­¥æ€§åœ°æŠ“å–è³‡æ–™ã€‚ä½ çš„æ“´å……å¥—ä»¶å°±å¿«å®Œæˆäº†ã€‚</p>
<p>å®ƒåªå‰©ç®¡ç†èƒŒæ™¯å·¥ä½œï¼šåŒ…æ‹¬åˆ·æ–°å¥—ä»¶çš„åœ–ç¤ºé¡è‰²ï¼Œæˆ‘å€‘ä¾†è¨è«–ç€è¦½å™¨æ˜¯å¦‚ä½•è™•ç†é€™é¡çš„å·¥ä½œã€‚ä¹Ÿè®“æˆ‘å€‘æ¢è¨ä½ æ‰€å»ºç«‹çš„ç¶²é ï¼Œç€è¦½å™¨æœƒå¤šæœ‰æ•ˆåœ°è™•ç†å…¶ä¸­çš„å…§å®¹ã€‚</p>
<h2 id="ç¶²é è™•ç†æ•ˆèƒ½çš„åŸºç¤">ç¶²é è™•ç†æ•ˆèƒ½çš„åŸºç¤</h2>
<blockquote>
<p>â€œç¶²é è™•ç†æ•ˆèƒ½æ”¸é—œå…©ä»¶äº‹ï¼šç¶²é å¤šå¿«åœ°è¼‰å…¥ï¼Œèˆ‡ç¨‹å¼å¤šå¿«åœ°åŸ·è¡Œã€‚â€ â€“ <a href="https://www.smashingmagazine.com/2012/06/javascript-profiling-chrome-developer-tools/">Zack Grossbart</a></p>
</blockquote>
<p>é—œæ–¼å¦‚ä½•è®“ä½ çš„ç¶²é èƒ½å¿«é€Ÿåœ°é‹ä½œåœ¨å„é¡è£ç½®ã€å„å€‹ä½¿ç”¨è€…ä»¥åŠå„ç¨®æƒ…æ³ï¼Œæ˜¯ä¸€ä»¶é›£ä»¥æƒ³åƒçš„é¾å¤§ä¸»é¡Œã€‚é€™è£¡æœ‰ä¸€äº›è¦é»ç¢ºä¿ä½ åœ¨é–‹ç™¼ç¶²é æˆ–æ˜¯æ“´å……åŠŸèƒ½æ™‚ï¼ŒéŠ˜è¨˜åœ¨å¿ƒã€‚</p>
<p>ç¬¬ä¸€ä»¶äº‹ç‚ºç¢ºä¿ç¶²é æ”¶é›†é—œæ–¼ç¶²é æ•ˆèƒ½çš„è³‡æ–™ï¼Œåœ¨ç€è¦½å™¨çš„é–‹ç™¼è€…å·¥å…·ä¸­å¯ä»¥å¯¦ç¾å®ƒã€‚åœ¨ Edge ä¸­ï¼Œé¸æ“‡ã€Œè¨­å®šåŠæ›´å¤šã€æŒ‰éˆ•(ç€è¦½å™¨ä¸Šä¸‰å€‹é»çš„åœ–ç¤º)ï¼Œä¸¦é¸æ“‡æ›´å¤šå·¥å…· &gt; é–‹ç™¼äººå“¡å·¥å…·ä¸¦é–‹å•Ÿ Performance åˆ†é ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨éµç›¤å¿«æ·éµï¼ŒWindows ä¸Šçš„ <code>Ctrl</code> + <code>Shift</code> + <code>I</code> èˆ‡ Mac ä¸Šçš„ <code>Option</code> + <code>Command</code> + <code>I</code> ä¾†é–‹å•Ÿé–‹ç™¼äººå“¡å·¥å…·ã€‚</p>
<p>Performance åˆ†é åŒ…æ‹¬äº†æ•ˆèƒ½åˆ†æå·¥å…·ã€‚é–‹å•Ÿä¸€å€‹ç¶²é ï¼Œä¾‹å¦‚ https://www.microsoft.comï¼Œé»æ“Š â€˜Recordâ€™ æŒ‰éˆ•ä¸¦é‡æ–°æ•´ç†ç¶²é ã€‚åœæ­¢éŒ„è£½å¾Œä½ å°±èƒ½å–å¾—ç¶²é çš„ â€˜scriptâ€™ã€â€˜renderâ€™ èˆ‡ â€˜paintâ€™ çš„éç¨‹èˆ‡è³‡è¨Šï¼š</p>
<figure>
<img src="../images/profiler.png" alt="Edge æ€§èƒ½åˆ†æå·¥å…·" /><figcaption>Edge æ€§èƒ½åˆ†æå·¥å…·</figcaption>
</figure>
<p>âœ… é€ è¨ª<a href="https://docs.microsoft.com/en-us/microsoft-edge/devtools-guide/performance?WT.mc_id=academic-13441-cxa">Microsoft æ–‡ä»¶</a>è§€çœ‹ Edge çš„ Performance åˆ†é è³‡è¨Š</p>
<blockquote>
<p>æç¤ºï¼šè¦å–å¾—çœŸæ­£çš„ç¶²é é–‹å•Ÿæ™‚é–“ï¼Œè¨˜å¾—æ¸…é™¤ä½ çš„ç€è¦½å™¨å¿«å–ã€‚</p>
</blockquote>
<p>é¸æ“‡ä¸€æ¨£ç¶²é åœ¨è¼‰å…¥æ™‚ï¼Œæ™‚é–“åˆ—ä¸­å‡ºç¾çš„äº‹ä»¶ç‰©ä»¶ã€‚</p>
<p>è§€çœ‹å®ƒçš„ç¸½è¦½é¢æ¿ä¸¦æˆªåœ–ä½ çš„ç¶²é æ•ˆèƒ½ã€‚</p>
<figure>
<img src="../images/snapshot.png" alt="Edge æ€§èƒ½åˆ†æå·¥å…·æˆªåœ–" /><figcaption>Edge æ€§èƒ½åˆ†æå·¥å…·æˆªåœ–</figcaption>
</figure>
<p>æª¢æŸ¥ Event Log é¢æ¿ï¼Œæ˜¯å¦æœ‰ç¶²é äº‹ä»¶èŠ±è¶…é 15 æ¯«ç§’ï¼š</p>
<figure>
<img src="../images/log.png" alt="Edge event log" /><figcaption>Edge event log</figcaption>
</figure>
<p>âœ… äº†è§£ä½ çš„æ€§èƒ½åˆ†æå·¥å…·ï¼åœ¨é€™å€‹ç¶²é ä¸­ï¼Œé–‹å•Ÿé–‹ç™¼è€…å·¥å…·ï¼Œæª¢æŸ¥æ˜¯å¦æœ‰ä»»ä½• bottleneckã€‚ä»€éº¼æ˜¯è¼‰å…¥æœ€ä¹…çš„ç‰©ä»¶ï¼Ÿå“ªå€‹åˆæ˜¯æœ€å¿«çš„ï¼Ÿ</p>
<h2 id="æ•ˆèƒ½åˆ†æ">æ•ˆèƒ½åˆ†æ</h2>
<p>ç¸½é«”è€Œè¨€ï¼Œæ¯ä¸€ä½ç¶²é é–‹ç™¼è€…ä¸€å®šè¦æ³¨æ„ä¸€äº›ã€Œæœ‰å•é¡Œçš„åœ°æ–¹ã€ï¼Œé¿å…åœ¨ç™¼å¸ƒä½œå“æ™‚æœ‰ä»¤äººæ„æƒ³ä¸åˆ°çš„é©šå–œã€‚</p>
<p><strong>è³‡ç”¢(Asset)å¤§å°</strong>ï¼šéå»å¹¾å¹´ä¾†ï¼Œç¶²é ã€Œè®Šé‡ã€äº†ï¼Œä¹Ÿå› æ­¤è®Šæ…¢äº†ã€‚æœ‰äº›è² æ“”ä¾†è‡ªæ–¼åœ–ç‰‡çš„ä½¿ç”¨ã€‚</p>
<p>âœ… æŸ¥è©¢<a href="https://httparchive.org/reports/page-weight">Internet Archive</a>ï¼Œçœ‹çœ‹éå»çš„ç¶²é è² æ“”ç­‰è³‡è¨Šã€‚</p>
<p>ä¸€å€‹å¥½çš„ç¿’æ…£æ˜¯ç¢ºä¿ä½ çš„åœ–ç‰‡æœ‰åšæœ€ä½³åŒ–ï¼Œå‘ˆç¾åˆç†çš„æª”æ¡ˆå¤§å°åŠè§£æåº¦å½±åƒçµ¦ä½ çš„ä½¿ç”¨è€…ã€‚</p>
<p><strong>DOM æŸ¥æ‰¾å…ƒç´ (Traversal)</strong>ï¼šç€è¦½å™¨å¿…é ˆä¾ç…§ä½ çš„ç¨‹å¼ç¢¼å»ºç«‹ Document Object Modelï¼Œè«‹ç¢ºä¿ä½ çš„ tags æœ€å°åŒ–ï¼Œç¶²é åªä½¿ç”¨å¿…é ˆçš„åŠŸèƒ½èˆ‡é€ å‹ã€‚å¦å¤–ï¼Œéé‡çš„ç¶²é  CSS ä¹Ÿå¯ä»¥è¢«æœ€ä½³åŒ–ï¼Œèˆ‰ä¾‹ä¾†èªªï¼Œé€ å‹æ¨£æ¿åªç”¨åœ¨å–®é ä¸Šï¼Œè€Œéå…¨åŸŸä¸Šã€‚</p>
<p><strong>JavaScript</strong>ï¼šæ¯ä¸€ä½ JavaScript é–‹ç™¼è€…æœƒè§€å¯Ÿ â€˜render-blockingâ€™ è…³æœ¬ï¼Œå®ƒæœƒåœ¨ DOM æŸ¥æ‰¾èˆ‡ç€è¦½å™¨å‘ˆç¾å‰è¢«è¼‰å…¥å¥½ã€‚è«‹è€ƒæ…®ä½¿ç”¨ <code>defer</code> åœ¨ä½ çš„ç¨‹å¼ç¢¼ä¸­ï¼Œæˆ‘å€‘çš„ç›†æ ½ç›’å°ˆæ¡ˆå°±æœ‰å¯¦è¸é€™è¡Œã€‚</p>
<p>âœ… åœ¨<a href="https://www.webpagetest.org/">ç¶²é æ¸¬é€Ÿç¶²</a>ä¸Šæ¸¬è©¦ä¸€äº›ç¶²é ï¼Œå­¸ç¿’ç¢ºèªç¶²é æ•ˆèƒ½çš„åŸºæœ¬æª¢æŸ¥ã€‚</p>
<p>ç¾åœ¨ä½ äº†è§£ç€è¦½å™¨å¦‚ä½•å‘ˆç¾ä½ æ‰€æä¾›çš„è³‡ç”¢ï¼Œæˆ‘å€‘ä¾†çœ‹çœ‹æˆ‘å€‘çš„æ“´å……åŠŸèƒ½æœ€å¾Œéœ€è¦è£œé½Šçš„é …ç›®ï¼š</p>
<h3 id="å»ºç«‹å‡½å¼è¨ˆç®—é¡è‰²">å»ºç«‹å‡½å¼è¨ˆç®—é¡è‰²</h3>
<p>ç·¨è¼¯ <code>/src/index.js</code>ï¼Œæ–°å¢å‡½å¼ <code>calculateColor()</code> åœ¨ä¸€ç³»åˆ—ç‚ºäº† DOM å­˜å–çš„ <code>const</code> è®Šæ•¸ä¹‹å¾Œï¼š</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">function</span> <span class="at">calculateColor</span>(value) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">    <span class="kw">let</span> co2Scale <span class="op">=</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">150</span><span class="op">,</span> <span class="dv">600</span><span class="op">,</span> <span class="dv">750</span><span class="op">,</span> <span class="dv">800</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb1-3" title="3">    <span class="kw">let</span> colors <span class="op">=</span> [<span class="st">&#39;#2AA364&#39;</span><span class="op">,</span> <span class="st">&#39;#F5EB4D&#39;</span><span class="op">,</span> <span class="st">&#39;#9E4229&#39;</span><span class="op">,</span> <span class="st">&#39;#381D02&#39;</span><span class="op">,</span> <span class="st">&#39;#381D02&#39;</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb1-4" title="4"></a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="kw">let</span> closestNum <span class="op">=</span> <span class="va">co2Scale</span>.<span class="at">sort</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-6" title="6">        <span class="cf">return</span> <span class="va">Math</span>.<span class="at">abs</span>(a <span class="op">-</span> value) <span class="op">-</span> <span class="va">Math</span>.<span class="at">abs</span>(b <span class="op">-</span> value)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="op">}</span>)[<span class="dv">0</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb1-8" title="8">    <span class="va">console</span>.<span class="at">log</span>(value <span class="op">+</span> <span class="st">&#39; is closest to &#39;</span> <span class="op">+</span> closestNum)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-9" title="9">    <span class="kw">let</span> num <span class="op">=</span> (element) <span class="kw">=&gt;</span> element <span class="op">&gt;</span> closestNum<span class="op">;</span></a>
<a class="sourceLine" id="cb1-10" title="10">    <span class="kw">let</span> scaleIndex <span class="op">=</span> <span class="va">co2Scale</span>.<span class="at">findIndex</span>(num)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-11" title="11"></a>
<a class="sourceLine" id="cb1-12" title="12">    <span class="kw">let</span> closestColor <span class="op">=</span> colors[scaleIndex]<span class="op">;</span></a>
<a class="sourceLine" id="cb1-13" title="13">    <span class="va">console</span>.<span class="at">log</span>(scaleIndex<span class="op">,</span> closestColor)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-14" title="14"></a>
<a class="sourceLine" id="cb1-15" title="15">    <span class="va">chrome</span>.<span class="va">runtime</span>.<span class="at">sendMessage</span>(<span class="op">{</span> <span class="dt">action</span><span class="op">:</span> <span class="st">&#39;updateIcon&#39;</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="op">{</span> <span class="dt">color</span><span class="op">:</span> closestColor <span class="op">}</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="op">}</span></a></code></pre></div>
<p>ç™¼ç”Ÿäº†ä»€éº¼äº‹ï¼Ÿä½ å‚³éäº† API å›å‚³çš„äºŒæ°§åŒ–ç¢³æ¿ƒåº¦æ•¸å€¼ï¼Œè¨ˆç®—å‡ºå®ƒæœ€é©åˆå°æ‡‰çš„é¡è‰²çŸ©é™£ç´¢å¼•ä½ç½®ã€‚ä¹‹å¾Œï¼Œä½ å°‡é€™å€‹é¡è‰²æ•¸å€¼å‚³çµ¦äº† chrome runtimeã€‚</p>
<p>chrome.runtime æœ‰<a href="https://developer.chrome.com/extensions/runtime">ä¸€å€‹ API</a>è™•ç†æ‰€æœ‰çš„èƒŒæ™¯å·¥ä½œï¼Œä½ çš„æ“´å……å¥—ä»¶å€ŸåŠ©äº†æ­¤åŠŸèƒ½ï¼š</p>
<blockquote>
<p>â€œåœ¨æ‡‰ç”¨ç¨‹å¼ä¸­ï¼Œä½¿ç”¨ chrome.runtime API ä¾†æ¥æ”¶èƒŒæ™¯é é¢ï¼Œå›å‚³é—œæ–¼ manifest çš„è³‡è¨Šï¼Œç›£è½ä¸¦å›æ‡‰äº‹ä»¶ã€‚ä½ ä¹Ÿå¯ä»¥åˆ©ç”¨æ­¤ API è½‰æ› URL çš„ç›¸å°è·¯å¾‘æˆçµ•å°è·¯å¾‘ã€‚â€</p>
</blockquote>
<p>âœ… å¦‚æœä½ æ­£æ‰“ç®—é–‹ç™¼æ­¤å°ˆæ¡ˆçµ¦ Edge ç€è¦½å™¨ä¸Šä½¿ç”¨ï¼Œä½ æœƒè¨ç•°ä½ ä½¿ç”¨çš„æ˜¯ chrome APIã€‚æ–°çš„ Edge ç€è¦½å™¨åŸ·è¡Œåœ¨ Chromium browser å¼•æ“ä¸Šï¼Œæ‰€ä»¥ä½ ä¹Ÿèƒ½ä½¿ç”¨é€™äº›å·¥å…·ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼Œå¦‚æœä½ æƒ³è¦å‰–æç€è¦½å™¨æ“´å……åŠŸèƒ½ï¼Œè«‹åœ¨æ“´å……å¥—ä»¶ä¸ŠåŸ·è¡Œé–‹ç™¼è€…å·¥å…·ï¼Œå®ƒèˆ‡ç€è¦½å™¨ä¸»è¦–çª—ç‚ºä¸åŒçš„å€‹é«”ã€‚</p>
</blockquote>
<h3 id="è¨­å®šåœ–ç¤ºé è¨­é¡è‰²">è¨­å®šåœ–ç¤ºé è¨­é¡è‰²</h3>
<p>ç¾åœ¨ï¼Œåœ¨å‡½å¼ <code>init()</code> ä¸­ï¼Œåˆ©ç”¨å‘¼å« chrome <code>updateIcon</code> è¨­å®šåœ–ç¤ºé¡è‰²ç‚ºé€šç”¨ç¶ ï¼š</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="va">chrome</span>.<span class="va">runtime</span>.<span class="at">sendMessage</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">    <span class="dt">action</span><span class="op">:</span> <span class="st">&#39;updateIcon&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-3" title="3">        <span class="dt">value</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-4" title="4">            <span class="dt">color</span><span class="op">:</span> <span class="st">&#39;green&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-5" title="5">        <span class="op">},</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="å‘¼å«å‡½å¼åŸ·è¡Œå‘¼å«">å‘¼å«å‡½å¼ã€åŸ·è¡Œå‘¼å«</h3>
<p>æ¥ä¸‹ä¾†ï¼Œåœ¨ C02Signal API å›å‚³çš„ promise ç‰©ä»¶ä¸‹æ–¹å‘¼å«å‡½å¼ï¼š</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="co">//let CO2...</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="at">calculateColor</span>(CO2)<span class="op">;</span></a></code></pre></div>
<p>æœ€å¾Œï¼Œåœ¨æª”æ¡ˆ <code>/dist/background.js</code> ä¸­ï¼Œæ–°å¢äº‹ä»¶ç›£è½è€…çµ¦é€™äº›èƒŒæ™¯è¡Œç‚ºçš„å‘¼å«ï¼š</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="va">chrome</span>.<span class="va">runtime</span>.<span class="va">onMessage</span>.<span class="at">addListener</span>(<span class="kw">function</span> (msg<span class="op">,</span> sender<span class="op">,</span> sendResponse) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">    <span class="cf">if</span> (<span class="va">msg</span>.<span class="at">action</span> <span class="op">===</span> <span class="st">&#39;updateIcon&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">        <span class="va">chrome</span>.<span class="va">browserAction</span>.<span class="at">setIcon</span>(<span class="op">{</span> <span class="dt">imageData</span><span class="op">:</span> <span class="at">drawIcon</span>(<span class="va">msg</span>.<span class="at">value</span>) <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4">    <span class="op">}</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">//åƒè€ƒ energy lollipop extensionï¼Œå¾ˆå¥½çš„ç¨‹å¼ï¼</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="kw">function</span> <span class="at">drawIcon</span>(value) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-8" title="8">    <span class="kw">let</span> canvas <span class="op">=</span> <span class="va">document</span>.<span class="at">createElement</span>(<span class="st">&#39;canvas&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-9" title="9">    <span class="kw">let</span> context <span class="op">=</span> <span class="va">canvas</span>.<span class="at">getContext</span>(<span class="st">&#39;2d&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-10" title="10"></a>
<a class="sourceLine" id="cb4-11" title="11">    <span class="va">context</span>.<span class="at">beginPath</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-12" title="12">    <span class="va">context</span>.<span class="at">fillStyle</span> <span class="op">=</span> <span class="va">value</span>.<span class="at">color</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-13" title="13">    <span class="va">context</span>.<span class="at">arc</span>(<span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="dv">50</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">2</span> <span class="op">*</span> <span class="va">Math</span>.<span class="at">PI</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-14" title="14">    <span class="va">context</span>.<span class="at">fill</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-15" title="15"></a>
<a class="sourceLine" id="cb4-16" title="16">    <span class="cf">return</span> <span class="va">context</span>.<span class="at">getImageData</span>(<span class="dv">50</span><span class="op">,</span> <span class="dv">50</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="dv">100</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-17" title="17"><span class="op">}</span></a></code></pre></div>
<p>åœ¨æ­¤ç¨‹å¼ä¸­ï¼Œä½ å»ºç«‹äº†äº‹ä»¶ç›£è½è€…çµ¦ä»»ä½•å‰åˆ°èƒŒæ™¯å·¥ä½œç®¡ç†è€…çš„è¨Šæ¯ã€‚è‹¥ â€˜updateIconâ€™ è¢«å‘¼å«ï¼Œå‰‡æ¥ä¸‹ä¾†çš„ç¨‹å¼æœƒè¢«åŸ·è¡Œï¼Œåˆ©ç”¨ Canvas API ç¹ªè£½å‡ºå°æ‡‰é¡è‰²çš„åœ–ç¤ºã€‚</p>
<p>âœ… ä½ æœƒå­¸ç¿’æ›´å¤šé—œæ–¼ Canvas API åœ¨å¾€å¾Œçš„<a href="../../6-space-game/2-drawing-to-canvas/translations/README.zh-tw.md">å¤ªç©ºéŠæˆ²èª²ç¨‹</a>ã€‚</p>
<p>ç¾åœ¨ï¼Œé‡æ–°å»ºåˆ¶ä½ çš„æ“´å……åŠŸèƒ½(<code>npm run build</code>)ï¼Œåˆ·æ–°ä¸¦é‹è¡Œä½ çš„å¥—ä»¶ï¼Œè§€å¯Ÿåœ–ç¤ºçš„é¡è‰²è®ŠåŒ–ã€‚ç¾åœ¨æ˜¯æ™‚å€™å»è·‘è…¿æˆ–æ˜¯æ´—ç¢—å—ï¼Ÿç¾åœ¨ä½ çŸ¥é“äº†ï¼</p>
<p>æ­å–œä½ ï¼Œä½ å·²ç¶“å»ºç«‹äº†ä¸€æ¬¾å¯¦ç”¨çš„ç€è¦½å™¨æ“´å……åŠŸèƒ½ï¼Œä¸¦å­¸åˆ°æ›´å¤šç€è¦½å™¨çš„é‹ä½œæ–¹å¼èˆ‡ç›£æ¸¬å®ƒçš„æ•ˆèƒ½åˆ†æã€‚</p>
<hr />
<h2 id="æŒ‘æˆ°">ğŸš€ æŒ‘æˆ°</h2>
<p>èª¿æŸ¥ä¸€äº›æ‚ ä¹…çš„é–‹æºç¶²ç«™ï¼Œä¸¦æ ¹æ“šå®ƒå€‘çš„ GitHub æ­·å²ï¼Œä½ èƒ½åˆ†è¾¨å®ƒå€‘éå»å¹¾å¹´ä»¥ä¾†æ•ˆèƒ½ä¸Šçš„èª¿æ•´å—ï¼Ÿä»€éº¼å®ƒå€‘æ˜¯å…±åŒçš„ç—›é»ï¼Ÿ</p>
<h2 id="èª²å¾Œæ¸¬é©—">èª²å¾Œæ¸¬é©—</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/28?loc=zh_tw">èª²å¾Œæ¸¬é©—</a></p>
<h2 id="è¤‡ç¿’èˆ‡è‡ªå­¸">è¤‡ç¿’èˆ‡è‡ªå­¸</h2>
<p>è«‹è€ƒæ…®è¨»å†Š<a href="https://perf.email/">performance newsletter</a></p>
<p>èª¿æŸ¥ç€è¦½å™¨æ¸¬é‡ç¶²é æ•ˆèƒ½çš„æ–¹æ³•ï¼ŒæŸ¥çœ‹é–‹ç™¼è€…å·¥å…·å…§çš„ Performance åˆ†é ã€‚ä½ èƒ½æ‰¾åˆ°ä»€éº¼å·¨å¤§çš„å·®åˆ¥å—ï¼Ÿ</p>
<h2 id="ä½œæ¥­">ä½œæ¥­</h2>
<p><a href="assignment.zh-tw.md">åˆ†æç¶²é æ•ˆèƒ½</a></p>
</body>
</html>
