<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README.zh-tw</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="ç›†æ ½ç›’å°ˆæ¡ˆ-part-3---dom-å…ƒç´ æ§åˆ¶èˆ‡é–‰åŒ…">ç›†æ ½ç›’å°ˆæ¡ˆ Part 3 - DOM å…ƒç´ æ§åˆ¶èˆ‡é–‰åŒ…</h1>
<p><img src="/sketchnotes/webdev101-js.png" alt="DOM å…ƒç´ èˆ‡é–‰åŒ…" /> &gt; ç”± <a href="https://twitter.com/girlie_mac">Tomomi Imura</a> ç¹ªè£½</p>
<h2 id="èª²å‰æ¸¬é©—">èª²å‰æ¸¬é©—</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/19?loc=zh_tw">èª²å‰æ¸¬é©—</a></p>
<h3 id="å¤§ç¶±">å¤§ç¶±</h3>
<p>æ“ä½œ DOM (Document Object Model) æ˜¯ç¶²é é–‹ç™¼çš„ä¸€é …é—œéµã€‚æ ¹æ“š<a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction">MDN æ–‡ä»¶</a>ï¼Œ ã€ŒDocument Object Model (DOM) å…ƒç´ èƒ½æ ¹æ“šç¶²é æ–‡ä»¶çš„çµæ§‹èˆ‡å…§å®¹ä¾†å‘ˆç¾ç‰©ä»¶ã€ã€‚è—‰ç”±ä½¿ç”¨ JavaScript æ¡†æ¶è€ŒéåŸå§‹çš„ JavaScript ç¨‹å¼ç¢¼ä¾†ç®¡ç† DOMï¼Œåœ¨ç¶²é ä¸Šæ“ä½œ DOM çš„æŒ‘æˆ°å·²ç¶“ä¸æ¯”ä»¥å‰å›°é›£äº†ï¼Œä½†é€™è£¡æˆ‘å€‘è¦è‡ªå·±ä¾†ç®¡ç†å®ƒå€‘ï¼</p>
<p>æ­¤å¤–ï¼Œé€™å ‚èª²ä¹Ÿæœƒä»‹ç´¹æœ‰é—œ<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures">JavaScript é–‰åŒ…(Closure)</a>çš„æ¦‚å¿µï¼Œä½ å¯ä»¥æƒ³åƒæˆä¸€å€‹å‡½å¼è¢«åŒ…åœ¨å¦ä¸€å€‹å‡½å¼ä¸­ï¼Œä»¥è¨ªå•å¤–é¢å‡½å¼ç¯„åœä¸­çš„è®Šæ•¸ã€‚</p>
<blockquote>
<p>JavaScript é–‰åŒ…æ˜¯å€‹å»£é—Šä¸”è¤‡é›œçš„ä¸»é¡Œã€‚æœ¬å ‚èª²åªè§¸åŠå»ºç«‹ç›†æ ½ç›’éœ€è¦çš„æœ€åŸºç¤æ¦‚å¿µã€‚ä½ èƒ½å¾—çŸ¥ä¸€å€‹é–‰åŒ…ç‚ºï¼šå…§éƒ¨å‡½å¼å’Œå¤–éƒ¨å‡½å¼å»ºç«‹ä¸€é …é—œä¿‚ï¼Œå…è¨±å…§éƒ¨å‡½å¼å­˜å–å¤–éƒ¨å‡½å¼çš„è®Šæ•¸ç­‰ä½œç”¨åŸŸã€‚è¦å¾—çŸ¥æ›´å¤šé—œæ–¼é–‰åŒ…çš„åŸç†ï¼Œè«‹é€ è¨ªè§€çœ‹<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures">é¡å¤–çš„æ–‡ä»¶</a>ã€‚</p>
</blockquote>
<p>æˆ‘å€‘æœƒä½¿ç”¨é–‰åŒ…ä¾†æ“æ§ DOMã€‚</p>
<p>æƒ³åƒ DOM å°±åƒä¸€æ£µæ¨¹ï¼Œè¡¨ç¾å‡ºæ‰€æœ‰æ“ä½œç¶²é çš„æ–¹å¼ã€‚å¤šæ¨£çš„ APIs (Application Program Interfaces) æä¾›ç¨‹å¼é–‹ç™¼è€…ï¼Œä¾ç…§è‡ªå·±ä½¿ç”¨çš„ç¨‹å¼èªè¨€ï¼Œä»¥å­˜å–ã€ç·¨è¼¯ã€ç·¨æ’ç­‰æ–¹å¼ç®¡ç† DOM å…ƒç´ ã€‚</p>
<figure>
<img src="../images/dom-tree.png" alt="DOM æ¨¹çš„è¡¨é”" /><figcaption>DOM æ¨¹çš„è¡¨é”</figcaption>
</figure>
<blockquote>
<p>HTML èªæ³•æœƒåƒè€ƒ DOM çš„å‘ˆç¾æ–¹å¼ã€‚å‡ºè‡ª <a href="https://www.researchgate.net/publication/221417012_Profile-Based_Focused_Crawler_for_Social_Media-Sharing_Websites">Olfa Nasraoui</a>ã€‚</p>
</blockquote>
<p>åœ¨é€™å ‚èª²ä¸­ï¼Œæˆ‘å€‘æœƒå®Œæˆæˆ‘å€‘çš„ç›†æ ½ç›’å°ˆæ¡ˆï¼Œå»ºç«‹ JavaScript ä¾†å°ç¶²é ä¸­çš„æ¤ç‰©é€²è¡Œäº’å‹•å¼æ“ä½œã€‚</p>
<h3 id="é–‹å§‹ä¹‹å‰">é–‹å§‹ä¹‹å‰</h3>
<p>ç¢ºä¿ç›†æ ½ç›’çš„ HTML èˆ‡ CSS å·²ç¶“ç·¨è¼¯å®Œæˆã€‚é€™å ‚èª²æœƒæ–°å¢æ‹–æ›³æ¤ç‰©é€²å‡ºç›†æ ½ç½çš„åŠŸèƒ½ã€‚</p>
<h3 id="èª²é¡Œ">èª²é¡Œ</h3>
<p>åœ¨å°ˆæ¡ˆè³‡æ–™å¤¾ä¸­ï¼Œæ–°å¢æª”æ¡ˆ <code>script.js</code>ã€‚ åŒ¯å…¥è©²æª”æ¡ˆåœ¨ HTML æª” <code>&lt;head&gt;</code> çš„éƒ¨åˆ†ï¼š</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb1-1" title="1">    <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;./script.js&quot;</span><span class="ot"> defer</span><span class="kw">&gt;&lt;/script&gt;</span></a></code></pre></div>
<h2 id="ç­†è¨˜åŒ¯å…¥å¤–éƒ¨-javascript-æª”æ¡ˆåˆ°-html-æª”æ¡ˆé ˆä½¿ç”¨-deferè®“-javascript-æª”æ¡ˆåªæœ‰åœ¨-html-è¢«å®Œå…¨è¼‰å…¥æ™‚æ‰è¢«åŸ·è¡Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨-async-çš„å±¬æ€§å…è¨±-javascript-åœ¨è§£æ-html-æª”æ™‚å°±è¢«åŸ·è¡Œé€™é …å°ˆæ¡ˆä¸­æˆ‘å€‘å¿…é ˆç¢ºä¿-html-çš„å…ƒä»¶è¢«å®Œæ•´å»ºç«‹å¾Œæ‰å…è¨±ä½¿ç”¨æ‹–æ›³åŠŸèƒ½">&gt; ç­†è¨˜ï¼šåŒ¯å…¥å¤–éƒ¨ JavaScript æª”æ¡ˆåˆ° HTML æª”æ¡ˆé ˆä½¿ç”¨ <code>defer</code>ï¼Œè®“ JavaScript æª”æ¡ˆåªæœ‰åœ¨ HTML è¢«å®Œå…¨è¼‰å…¥æ™‚æ‰è¢«åŸ·è¡Œã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>async</code> çš„å±¬æ€§ï¼Œå…è¨± JavaScript åœ¨è§£æ HTML æª”æ™‚å°±è¢«åŸ·è¡Œã€‚é€™é …å°ˆæ¡ˆä¸­ï¼Œæˆ‘å€‘å¿…é ˆç¢ºä¿ HTML çš„å…ƒä»¶è¢«å®Œæ•´å»ºç«‹å¾Œæ‰å…è¨±ä½¿ç”¨æ‹–æ›³åŠŸèƒ½ã€‚</h2>
<h2 id="dom-å…ƒç´ ">DOM å…ƒç´ </h2>
<p>æˆ‘å€‘è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯å»ºç«‹ DOM ä¸‹ï¼Œè¦è¢«æ“æ§çš„ç‰©ä»¶çš„é€£çµã€‚åœ¨å°ˆæ¡ˆä¾‹å­ä¸­ï¼Œæˆ‘å€‘æœ‰ç½å­å¤–çš„åå››æ ªæ¤ç‰©ç­‰è‘—è¢«æ‹–æ›³ã€‚</p>
<h3 id="èª²é¡Œ-1">èª²é¡Œ</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb2-1" title="1">dragElement(document.getElementById(&#39;plant1&#39;));</a>
<a class="sourceLine" id="cb2-2" title="2">dragElement(document.getElementById(&#39;plant2&#39;));</a>
<a class="sourceLine" id="cb2-3" title="3">dragElement(document.getElementById(&#39;plant3&#39;));</a>
<a class="sourceLine" id="cb2-4" title="4">dragElement(document.getElementById(&#39;plant4&#39;));</a>
<a class="sourceLine" id="cb2-5" title="5">dragElement(document.getElementById(&#39;plant5&#39;));</a>
<a class="sourceLine" id="cb2-6" title="6">dragElement(document.getElementById(&#39;plant6&#39;));</a>
<a class="sourceLine" id="cb2-7" title="7">dragElement(document.getElementById(&#39;plant7&#39;));</a>
<a class="sourceLine" id="cb2-8" title="8">dragElement(document.getElementById(&#39;plant8&#39;));</a>
<a class="sourceLine" id="cb2-9" title="9">dragElement(document.getElementById(&#39;plant9&#39;));</a>
<a class="sourceLine" id="cb2-10" title="10">dragElement(document.getElementById(&#39;plant10&#39;));</a>
<a class="sourceLine" id="cb2-11" title="11">dragElement(document.getElementById(&#39;plant11&#39;));</a>
<a class="sourceLine" id="cb2-12" title="12">dragElement(document.getElementById(&#39;plant12&#39;));</a>
<a class="sourceLine" id="cb2-13" title="13">dragElement(document.getElementById(&#39;plant13&#39;));</a>
<a class="sourceLine" id="cb2-14" title="14">dragElement(document.getElementById(&#39;plant14&#39;));</a></code></pre></div>
<p>ç™¼ç”Ÿäº†ä»€éº¼äº‹ï¼Ÿä½ æ­£ä»¥ DOM æœå°‹ç¶²é æª”å…§çš„ç‰©ä»¶ï¼Œè—‰ç”± Id ä½œç‚ºä¾æ“šä¾†æœå°‹ã€‚å›æƒ³ç¬¬ä¸€å ‚ HTML èª²ä¸­ï¼Œæˆ‘å€‘å¯æ¯ä¸€æ ªæ¤ç‰©ä¸€å€‹å°ˆå±¬çš„ Id (<code>id="plant1"</code>)ï¼Œç¾åœ¨ä½ å°±å¯ä»¥ä½¿ç”¨å®ƒã€‚åœ¨è¾¨åˆ¥å®Œæ¯ä¸€æ ªæ¤ç‰©ç‰©ä»¶å¾Œï¼Œå‚³éçµ¦å¾…ç·¨è¼¯çš„å‡½å¼ <code>dragElement</code>ï¼Œè®“ HTML ç‰©ä»¶å¯ä»¥è¢«æ‹–æ›³ã€‚</p>
<p>âœ… ç‚ºä»€éº¼æˆ‘å€‘è¦ä»¥ Id ä½œç‚ºç‰©ä»¶çš„åƒè€ƒï¼Ÿç‚ºä»€éº¼ä¸ä»¥ CSS çš„ class ä½œç‚ºåƒè€ƒï¼Ÿè«‹åƒè€ƒä»¥å‰çš„ CSS èª²ç¨‹å›ç­”æ­¤å•é¡Œã€‚</p>
<hr />
<h2 id="é–‰åŒ…closure">é–‰åŒ…(Closure)</h2>
<p>ç¾åœ¨ï¼Œä½ å·²ç¶“æº–å‚™å¥½è¦å»ºç«‹ dragElement é–‰åŒ…ï¼Œå»ºç«‹åŒ…åœ¨å¤–éƒ¨å‡½å¼å…§çš„å…§éƒ¨å‡½å¼çµ„ï¼Œåœ¨æˆ‘å€‘çš„ä¾‹å­ä¸­ï¼Œæœƒç”¨ä¸Šä¸‰å€‹å‡½å¼ã€‚</p>
<p>é–‰åŒ…åœ¨ä¸€æˆ–å¤šå€‹ä»¥ä¸Šå‡½å¼è¦å­˜å–å¤–éƒ¨å‡½å¼æ™‚éå¸¸å¥½ç”¨ã€‚çœ‹çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">function</span> <span class="at">displayCandy</span>()<span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">    <span class="kw">let</span> candy <span class="op">=</span> [<span class="st">&#39;jellybeans&#39;</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb3-3" title="3">    <span class="kw">function</span> <span class="at">addCandy</span>(candyType) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-4" title="4">        <span class="va">candy</span>.<span class="at">push</span>(candyType)</a>
<a class="sourceLine" id="cb3-5" title="5">    <span class="op">}</span></a>
<a class="sourceLine" id="cb3-6" title="6">    <span class="at">addCandy</span>(<span class="st">&#39;gumdrops&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="op">}</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="at">displayCandy</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="va">console</span>.<span class="at">log</span>(candy)</a></code></pre></div>
<p>é€™é …ä¾‹å­ä¸­ï¼Œå‡½å¼ displayCandy åŒ…ä½å¦ä¸€å€‹å‡½å¼ addCandyï¼Œæ–°å¢æ–°çš„ç³–æœæ¨£å¼åˆ°å·²å­˜åœ¨çš„çŸ©é™£ç•¶ä¸­ã€‚ç•¶åŸ·è¡Œé€™æ®µç¨‹å¼æ™‚ï¼ŒçŸ©é™£ <code>candy</code> æœƒè¢«èªä½œæ˜¯æœªå®šç¾©ï¼Œå› ç‚ºå®ƒæ˜¯å‡½å¼çš„æœ¬åœ°è®Šæ•¸ã€‚</p>
<p>âœ… ä½ èƒ½è®“çŸ©é™£ <code>candy</code> è¢«å­˜å–å—ï¼Ÿè©¦è‘—å°‡å®ƒç§»åˆ°é–‰åŒ…å¤–é¢ã€‚é€™æ™‚ï¼ŒçŸ©é™£æœƒè®Šæˆå…¨åŸŸè®Šæ•¸ï¼Œå–æ¶ˆé–‰åŒ…å…§çš„å­˜å–é™åˆ¶ã€‚</p>
<h3 id="èª²é¡Œ-2">èª²é¡Œ</h3>
<p>åœ¨æª”æ¡ˆ <code>script.js</code> çš„å…ƒç´ å®£å‘Šä¸‹æ–¹ï¼Œæ–°å¢å‡½å¼ï¼š</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">function</span> <span class="at">dragElement</span>(terrariumElement) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">    <span class="co">//set 4 positions for positioning on the screen</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="kw">let</span> pos1 <span class="op">=</span> <span class="dv">0</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-4" title="4">        pos2 <span class="op">=</span> <span class="dv">0</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-5" title="5">        pos3 <span class="op">=</span> <span class="dv">0</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-6" title="6">        pos4 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-7" title="7">    <span class="va">terrariumElement</span>.<span class="at">onpointerdown</span> <span class="op">=</span> pointerDrag<span class="op">;</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="op">}</span></a></code></pre></div>
<p><code>dragElement</code> è—‰ç”±ç¨‹å¼å®šç¾©çš„åƒæ•¸å–å¾— <code>terrariumElement</code> ç‰©ä»¶ã€‚ä¹‹å¾Œï¼Œè¨­å®šä¸€äº›ä½ç½® <code>0</code> çš„è®Šæ•¸çµ¦å‡½å¼å…§çš„ç‰©ä»¶ä½¿ç”¨ã€‚å®ƒå€‘æ˜¯æœ¬åœ°è®Šæ•¸ï¼Œçµ¦æ¯ä¸€å€‹é€²åˆ°æ‹–æ›³å‡½å¼å…§çš„ç‰©ä»¶æ“æ§ã€‚ç›†æ ½ç›’æœƒè¢«é€™äº›æ‹–æ›³ç‰©ä»¶å¡«å……ï¼Œæˆ‘å€‘çš„ç¶²é æ‡‰ç”¨å¿…é ˆè¦æŒçºŒè¿½è¹¤é€™äº›ç‰©ä»¶çš„ä½ç½®ã€‚</p>
<p>æ­¤å¤–ï¼Œé€²åˆ°å‡½å¼çš„ terrariumElement ä¹Ÿè¢«æ–°å¢äº† <code>pointerdown</code> äº‹ä»¶ï¼Œå®ƒæ˜¯ç®¡ç† DOM çš„å…¶ä¸­ä¸€é …<a href="https://developer.mozilla.org/en-US/docs/Web/API">ç¶²é  APIs</a>ã€‚ç•¶æŒ‰éˆ•æŒ‰ä¸‹æ™‚ï¼Œæˆ–æ˜¯åœ¨æˆ‘å€‘æ¡ˆä¾‹ä¸­ï¼Œä¸€å€‹æ‹–æ›³ç‰©ä»¶è¢«é»æ“Šæ™‚ï¼Œ<code>onpointerdown</code> äº‹ä»¶å°±æœƒè¢«è§¸ç™¼ã€‚é€™å€‹äº‹ä»¶è™•ç†å™¨(event handler)çš†é‹ä½œåœ¨<a href="https://caniuse.com/?search=onpointerdown">ç¶²é èˆ‡è¡Œå‹•ç€è¦½å™¨</a>ä¸Šï¼Œåªæœ‰å°‘éƒ¨åˆ†çš„ä¾‹å¤–ã€‚</p>
<p>âœ… <a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onclick">äº‹ä»¶è™•ç†å™¨ <code>onclick</code></a>æ”¯æ´æ›´å¤šçš„ç€è¦½å™¨ã€‚ç‚ºä»€éº¼æˆ‘å€‘ä¸åœ¨é€™é‚Šä½¿ç”¨å®ƒï¼Ÿ æƒ³æƒ³çœ‹æˆ‘å€‘åœ¨é€™æ­¤å»ºç«‹çš„è¦–çª—äº’å‹•é¡å‹ã€‚</p>
<hr />
<h2 id="å‡½å¼-pointerdrag">å‡½å¼ pointerDrag</h2>
<p>terrariumElement å·²ç¶“æº–å‚™å¥½è¢«æ‹–æ›³äº†ã€‚ç•¶è§¸ç™¼ <code>onpointerdown</code> äº‹ä»¶æ™‚ï¼Œå‡½å¼ pointerDrag æœƒåƒèˆ‡å…¶ä¸­ã€‚æ–°å¢é€™é …å‡½å¼åœ¨ç¨‹å¼ç¢¼ <code>terrariumElement.onpointerdown = pointerDrag;</code> ä¸‹æ–¹ï¼š</p>
<h3 id="èª²é¡Œ-3">èª²é¡Œ</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">function</span> <span class="at">pointerDrag</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">    <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="va">console</span>.<span class="at">log</span>(e)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-4" title="4">    pos3 <span class="op">=</span> <span class="va">e</span>.<span class="at">clientX</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-5" title="5">    pos4 <span class="op">=</span> <span class="va">e</span>.<span class="at">clientY</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="op">}</span></a></code></pre></div>
<p>è¨±å¤šäº‹æƒ…æœƒç™¼ç”Ÿã€‚é¦–å…ˆï¼Œä½ ä½¿ç”¨ <code>e.preventDefault();</code> å–æ¶ˆæ‰ pointerdown åŸå…ˆçš„é è¨­äº‹ä»¶ã€‚é€™æ¨£ä½ å¯ä»¥æ“ä½œæ›´å¤šçš„ä»‹é¢è¡Œç‚ºã€‚</p>
<blockquote>
<p>å›åˆ°ä½ å»ºç«‹çš„ç¨‹å¼ç¢¼ä¸­ï¼Œè©¦è‘—åˆªé™¤ <code>e.preventDefault()</code> ä¸¦åŸ·è¡Œçœ‹çœ‹ï¼Œç™¼ç”Ÿäº†ä»€éº¼äº‹ï¼Ÿ</p>
</blockquote>
<p>ç¬¬äºŒï¼Œç”¨ç€è¦½å™¨æ‰“é–‹ <code>index.html</code> ä¸¦èª¿æŸ¥æˆ‘å€‘çš„ä»‹é¢ã€‚ç•¶ä½ é»æ“Šæ¤ç‰©æ™‚ï¼Œä½ å¯ä»¥ç™¼ç¾ â€˜eâ€™ äº‹ä»¶è¢«è§¸ç™¼äº†ã€‚å°ˆç ”ä¸€ä¸‹ï¼Œä¸€å€‹ pointerdown äº‹ä»¶æœƒç”¢ç”Ÿå¤šå°‘è³‡è¨Šï¼</p>
<p>æ¥ä¸‹ä¾†ï¼Œç´€éŒ„æœ¬åœ°è®Šæ•¸ <code>pos3</code> å’Œ <code>pos4</code> è¢«è¨­å®šç‚º e.clientX å’Œ e.clientYã€‚ä½ å¯ä»¥åœ¨è§€å¯Ÿé¢æ¿ä¸­ï¼Œæœƒç™¼ç¾ <code>e</code> çš„æ•¸å€¼ã€‚é€™é …æ•¸å€¼å–å¾—æŒ‰ä¸‹æ¤ç‰©ç¬é–“çš„ x èˆ‡ y åº§æ¨™è³‡è¨Šã€‚ç‚ºäº†å…¨é¢çš„æ§åˆ¶æ¤ç‰©è¡Œç‚ºï¼Œåœ¨æ‹–æ›³æ¤ç‰©æ™‚ï¼Œæˆ‘å€‘æœƒæŒçºŒæ›´æ–°åº§æ¨™è³‡è¨Šã€‚</p>
<p>âœ… å°‡æ•´å€‹ç¶²é æ‡‰ç”¨å»ºç«‹åœ¨ä¸€å€‹å¤§é–‰åŒ…ä¸‹ï¼Œæœƒè®“ç¨‹å¼ç¢¼è®Šå¾—æ¯”è¼ƒæ¸…æ¥šå—ï¼Ÿå¦‚æœæ²’æœ‰ï¼Œä½ æœ‰å…¶ä»–æ–¹æ³•ç®¡ç†é€™åå››æ ªå¯æ‹–æ›³çš„æ¤ç‰©å—ï¼Ÿ</p>
<p>å¢åŠ åˆå§‹åŒ–å‡½å¼ï¼Œåœ¨ç¨‹å¼ç¢¼ <code>pos4 = e.clientY</code> ä¸‹æ–¹åŠ ä¸Šä¸‹åˆ—å…©è¡Œäº‹ä»¶è™•ç†ï¼š</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb6-1" title="1">document.onpointermove = elementDrag;</a>
<a class="sourceLine" id="cb6-2" title="2">document.onpointerup = stopElementDrag;</a></code></pre></div>
<p>ç¾åœ¨ï¼Œåœ¨æ¸¸æ¨™æ‹–æ›³æ™‚ï¼Œä½ çš„æ¤ç‰©èƒ½è·Ÿè‘—ä½ çš„æ¸¸æ¨™èµ°ï¼Œè€Œåœ¨ä½ å–æ¶ˆé»æ“Šæ™‚åœä¸‹ä¾†ã€‚<code>onpointermove</code> å’Œ <code>onpointerup</code> ä¹Ÿæ˜¯ <code>onpointerdown</code> é¡å‹ç›¸åŒçš„ APIã€‚ç„¶è€Œï¼Œç¾åœ¨ä»‹é¢æœƒå‡ºç¾éŒ¯èª¤è¨Šæ¯ï¼Œå› ç‚ºæˆ‘å€‘é‚„æ²’å»ºç«‹å‡½å¼ <code>elementDrag</code> èˆ‡ <code>stopElementDrag</code>ã€‚</p>
<h2 id="å‡½å¼-elementdrag-èˆ‡-stopelementdrag">å‡½å¼ elementDrag èˆ‡ stopElementDrag</h2>
<p>æ–°å¢å…©æ¢å…§éƒ¨å‡½å¼åœ¨é–‰åŒ…ä¸­ï¼Œå®ƒå€‘æœƒè™•ç†æ‹–æ›³æ¤ç‰©èˆ‡åœæ­¢æ‹–æ›³çš„äº‹ä»¶ã€‚ä½ å¸Œæœ›ä½ å¯ä»¥æ‹–æ›³ä»»ä½•ä¸€æ ªæ¤ç‰©ä¸”æ”¾åœ¨è¢å¹•ä¸Šçš„ä»»ä¸€åœ°æ–¹ã€‚ä»‹é¢ä¸¦æ²’æœ‰å¼·åˆ¶ä½ ç›†æ ½ç›’çš„é…ç½®æ ¼å¼ï¼Œä½ å¯ä»¥è‡ªç”±åœ°å¢åŠ ã€ç§»é™¤èˆ‡ç§»å‹•ç›†æ ½ç½å…§çš„æ¤ç‰©ã€‚</p>
<h3 id="èª²é¡Œ-4">èª²é¡Œ</h3>
<p>æ–°å¢å‡½å¼ <code>elementDrag</code> åœ¨å‡½å¼é–‰åŒ… <code>pointerDrag</code> å®£å‘Šåˆ—çš„æ­£ä¸‹æ–¹ï¼š</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">function</span> <span class="at">elementDrag</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">    pos1 <span class="op">=</span> pos3 <span class="op">-</span> <span class="va">e</span>.<span class="at">clientX</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-3" title="3">    pos2 <span class="op">=</span> pos4 <span class="op">-</span> <span class="va">e</span>.<span class="at">clientY</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-4" title="4">    pos3 <span class="op">=</span> <span class="va">e</span>.<span class="at">clientX</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-5" title="5">    pos4 <span class="op">=</span> <span class="va">e</span>.<span class="at">clientY</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-6" title="6">    <span class="va">console</span>.<span class="at">log</span>(pos1<span class="op">,</span> pos2<span class="op">,</span> pos3<span class="op">,</span> pos4)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-7" title="7">    <span class="va">terrariumElement</span>.<span class="va">style</span>.<span class="at">top</span> <span class="op">=</span> <span class="va">terrariumElement</span>.<span class="at">offsetTop</span> <span class="op">-</span> pos2 <span class="op">+</span> <span class="st">&#39;px&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-8" title="8">    <span class="va">terrariumElement</span>.<span class="va">style</span>.<span class="at">left</span> <span class="op">=</span> <span class="va">terrariumElement</span>.<span class="at">offsetLeft</span> <span class="op">-</span> pos1 <span class="op">+</span> <span class="st">&#39;px&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="op">}</span></a></code></pre></div>
<p>åœ¨é€™æ¢å‡½å¼ä¹‹å‰ï¼Œä½ ç·¨è¼¯äº†å››å€‹æœ¬åœ°è®Šæ•¸ä½ç½®çš„åˆå§‹å€¼åœ¨å¤–éƒ¨å‡½å¼ä¸­ã€‚é€™é‚Šåˆåšäº†ä»€éº¼äº‹ï¼Ÿ</p>
<p>ç•¶ä½ æ‹–æ›³ç‰©ä»¶æ™‚ï¼Œä½ æ›´æ–°æ•¸å€¼ <code>pos1</code> ç‚º <code>pos3</code> æ¸›å»ç¾åœ¨çš„ <code>e.clientX</code>ï¼Œè€Œ <code>pos3</code> åœ¨ä¹‹å‰è¢«åˆå§‹åŒ–ç‚ºç‚º <code>e.clientX</code>ã€‚åŒæ¨£çš„è¡Œç‚ºå¥—ç”¨åœ¨ <code>pos2</code>ä¸Šã€‚ä¹‹å¾Œï¼Œä½ æ›´æ–° <code>pos3</code> èˆ‡ <code>pos4</code> åˆ°æ–°çš„ XY åº§æ¨™é»ä½ç½®ã€‚ä½ èƒ½åœ¨ console ä¸‹çœ‹åˆ°æ•¸å€¼åœ¨æ‹–æ›³ä¸‹æ›´æ–°çš„æƒ…æ³ã€‚æˆ‘å€‘ä¹Ÿæ›´æ–°æ¤ç‰©çš„ CSS é€ å‹ä¸­çš„å®šä½é»ç‚º <code>pos1</code> èˆ‡ <code>pos2</code>ï¼Œæ¯”è¼ƒæ¤ç‰©å·¦ä¸Šæ–¹åº§æ¨™é»èˆ‡æ–°åº§æ¨™é»çš„é—œä¿‚ã€‚</p>
<blockquote>
<p><code>offsetTop</code> å’Œ <code>offsetLeft</code> æ˜¯ CSS çš„å±¬æ€§ï¼Œæ±ºå®šç‰©ä»¶èˆ‡å®ƒçˆ¶é—œä¿‚ç‰©ä»¶çš„å®šä½é—œä¿‚ã€‚çˆ¶é—œä¿‚ç‰©ä»¶å¯ä»¥æ˜¯ä»»ä½•å…ƒç´ ï¼Œåªè¦å®ƒçš„å®šä½å±¬æ€§ä¸ç‚º <code>static</code>ã€‚</p>
</blockquote>
<p>é€™äº›åº§æ¨™é»çš„è¨ˆç®—å¼è®“ä½ æˆåŠŸæ ¡æ•´äº†æ¤ç‰©èˆ‡ç›†æ ½ç›’ä¹‹é–“çš„è¡Œç‚ºã€‚</p>
<h3 id="èª²é¡Œ-5">èª²é¡Œ</h3>
<p>æœ€å¾Œçš„èª²é¡Œæ˜¯åœ¨ä»‹é¢ä¸Šæ–°å¢ <code>stopElementDrag</code> å‡½å¼ï¼Œæˆ‘å€‘å°‡å®ƒåŠ åœ¨å‡½å¼é–‰åŒ… <code>elementDrag</code> çš„æ­£ä¸‹æ–¹ï¼š</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">function</span> <span class="at">stopElementDrag</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">    <span class="va">document</span>.<span class="at">onpointerup</span> <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-3" title="3">    <span class="va">document</span>.<span class="at">onpointermove</span> <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>é€™æ¢å°å‡½å¼é‡åˆ¶ <code>onpointerup</code> èˆ‡ <code>onpointermove</code> äº‹ä»¶ï¼Œé€™æ¨£ä½ å¯ä»¥é‡æ–°é–‹å§‹è©²æ¤ç‰©çš„æ‹–æ›³äº‹ä»¶ï¼Œæˆ–æ˜¯æ‹–æ›³æ–°çš„æ¤ç‰©ã€‚</p>
<p>âœ… å¦‚æœä¸å°‡é€™äº›äº‹ä»¶è¨­ç‚ºç©ºå€¼æ™‚ï¼Œæœƒç™¼ç”Ÿä»€éº¼äº‹ï¼Ÿ</p>
<p>æˆ‘å€‘çµ‚æ–¼å®Œæˆäº†é€™é …å°ˆæ¡ˆï¼</p>
<p>ğŸ¥‡ æ­å–œä½ ï¼ä½ å»ºç«‹äº†ä¸€å€‹æ¼‚äº®çš„ç›†æ ½ç›’ã€‚<img src="../images/terrarium-final.png" alt="ç›†æ ½ç›’æˆæœåœ–" /></p>
<hr />
<h2 id="æŒ‘æˆ°">ğŸš€ æŒ‘æˆ°</h2>
<p>æ–°å¢æ–°çš„äº‹ä»¶è™•ç†å™¨åˆ°ä½ çš„é–‰åŒ…ä¸­ï¼Œè®“ä½ èƒ½å°æ¤ç‰©åšæ›´å¤šçš„äº‹æƒ…ã€‚èˆ‰ä¾‹ä¾†èªªï¼Œé›™æ“Šæ¤ç‰©è®“å®ƒæ’åˆ—åˆ°æœ€ä¸Šå±¤ã€‚ç™¼æ®ä½ çš„å‰µæ„å§ï¼</p>
<h2 id="èª²å¾Œæ¸¬é©—">èª²å¾Œæ¸¬é©—</h2>
<p><a href="https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/20?loc=zh_tw">èª²å¾Œæ¸¬é©—</a></p>
<h2 id="è¤‡ç¿’èˆ‡è‡ªå­¸">è¤‡ç¿’èˆ‡è‡ªå­¸</h2>
<p>åœ¨è¢å¹•ä¸Šæ‹–æ›³ç‰©ä»¶çœ‹ä¼¼ç°¡å–®ï¼Œä½†ä¾ç…§ä¸åŒçš„ç›®çš„èˆ‡å¯¦ç¾æ–¹æ³•æœƒé­é‡åˆ°ä¸åŒçš„å•é¡Œã€‚äº‹å¯¦ä¸Šï¼Œé€™é‚Šæœ‰ä¸€ä»½é—œæ–¼ä½ å¯ä»¥å˜—è©¦çš„<a href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API">æ‹–æ›³ API</a>ã€‚æˆ‘å€‘æ²’åœ¨å°ˆæ¡ˆä¸­ä½¿ç”¨æ˜¯ç‚ºäº†å»ºç«‹ä¸ä¸€æ¨£çš„å¯¦ç¾æ–¹æ³•ï¼Œè©¦è‘—ä½¿ç”¨é€™äº› API åˆ°å°ˆæ¡ˆä¸­ï¼Œçœ‹çœ‹ä½ èƒ½å®Œæˆä»€éº¼ã€‚</p>
<p>åœ¨<a href="https://www.w3.org/TR/pointerevents1/">W3C æ–‡ä»¶</a> å’Œ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Pointer_events">MDN ç¶²é æ–‡ä»¶</a>ä¸Šå–å¾—æ›´å¤šé—œæ–¼ pointer çš„äº‹ä»¶ã€‚</p>
<p>è¨˜å¾—ç¿’æ…£æ€§ç”¨<a href="https://caniuse.com/">CanIUse.com</a>æª¢æŸ¥ç¶²é çš„ç€è¦½å™¨å…¼å®¹æ€§ã€‚</p>
<h2 id="ä½œæ¥­">ä½œæ¥­</h2>
<p><a href="assignment.zh-tw.md">ç”¨ DOM åšæ›´å¤šäº‹</a></p>
</body>
</html>
